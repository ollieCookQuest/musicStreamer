{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/dashboard/zone-selector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Radio, Heart, Compass, Layout, Waves, Settings } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\n\nconst NAV_ITEMS = [\n  { icon: Compass, label: \"Feed\", page: \"Feed\" },\n  { icon: Layout, label: \"Library\", page: \"Library\" },\n  { icon: Radio, label: \"Broadcast\", page: \"Broadcast\" },\n  { icon: Heart, label: \"Curated\", page: \"Curated\" },\n  { icon: Settings, label: \"Settings\", page: \"Settings\" },\n];\n\nexport function ZoneSelector({ isCollapsed }: { isCollapsed: boolean }) {\n  const { groups, currentGroup, setCurrentGroup, currentPage, setCurrentPage } = useSonos();\n\n  return (\n    <div className=\"flex flex-col h-full space-y-10 py-2\">\n      {/* Primary Navigation */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-foreground opacity-20 px-6\">\n          System\n        </h3>\n        <nav className=\"space-y-1 px-2\">\n          {NAV_ITEMS.map((item) => {\n            const isActive = currentPage === item.page;\n            return (\n              <Button\n                key={item.label}\n                variant=\"ghost\"\n                onClick={() => setCurrentPage(item.page)}\n                className={cn(\n                  \"w-full h-12 rounded-2xl transition-all duration-300 flex items-center justify-start px-4 group relative\",\n                  isActive \n                    ? \"bg-foreground/[0.05] text-foreground shadow-sm\" \n                    : \"text-muted-foreground hover:bg-foreground/[0.03] hover:text-foreground\"\n                )}\n              >\n                <item.icon className={cn(\n                  \"h-4 w-4 shrink-0 transition-transform duration-500\",\n                  isActive ? \"scale-110\" : \"group-hover:scale-110\"\n                )} />\n                <span className=\"font-black tracking-tight text-[11px] uppercase italic ml-4\">\n                  {item.label}\n                </span>\n              </Button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Room Selection - Architectural Design */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-foreground opacity-20 px-6\">\n          Zones\n        </h3>\n        \n        <div className=\"space-y-2 px-2\">\n          {groups.map((group) => {\n            const isPlaying = group.playbackState === \"PLAYBACK_STATE_PLAYING\";\n            const isActive = currentGroup?.id === group.id;\n            \n            return (\n              <motion.button\n                key={group.id}\n                onClick={() => setCurrentGroup(group)}\n                className={cn(\n                  \"w-full h-20 rounded-[2rem] transition-all duration-500 relative flex items-center px-4 overflow-hidden border\",\n                  isActive \n                    ? \"bg-foreground/[0.06] text-foreground border-foreground/[0.1]\" \n                    : \"bg-transparent text-muted-foreground hover:bg-foreground/[0.02] border-transparent\"\n                )}\n                whileHover={{ scale: 1.01 }}\n                whileTap={{ scale: 0.99 }}\n              >\n                {/* Active State Indicator - Left Edge */}\n                {isActive && (\n                  <motion.div \n                    layoutId=\"active-zone-indicator\"\n                    className=\"absolute left-0 top-0 bottom-0 w-0.5 bg-foreground\"\n                  />\n                )}\n\n                {/* Icon Container */}\n                <div className=\"relative shrink-0 flex items-center justify-center\">\n                  <div className={cn(\n                    \"h-12 w-12 rounded-full flex items-center justify-center transition-all duration-500\",\n                    isActive \n                      ? \"bg-foreground shadow-lg\" \n                      : \"bg-foreground/[0.05]\"\n                  )}>\n                    <Waves className={cn(\n                      \"h-5 w-5 transition-colors duration-500\",\n                      isActive ? \"text-background\" : \"text-muted-foreground\"\n                    )} />\n                  </div>\n                  \n                  {/* Playing Indicator Dot */}\n                  {isPlaying && (\n                    <motion.div \n                      layoutId={`playing-dot-${group.id}`}\n                      className=\"absolute -top-0.5 -right-0.5 h-2.5 w-2.5 rounded-full bg-primary border-2 border-background shadow-sm\"\n                      animate={{ scale: [1, 1.2, 1] }}\n                      transition={{ repeat: Infinity, duration: 2 }}\n                    />\n                  )}\n                </div>\n                \n                {/* Text Content */}\n                <div className=\"flex flex-col items-start ml-4 flex-1 min-w-0\">\n                  <span className={cn(\n                    \"font-black text-sm tracking-tight uppercase italic transition-colors leading-none truncate w-full\",\n                    isActive ? \"text-foreground\" : \"text-muted-foreground opacity-60\"\n                  )}>\n                    {group.name}\n                  </span>\n                  \n                  {/* Status Indicator */}\n                  <div className=\"mt-2 h-3 flex items-center\">\n                    {isPlaying ? (\n                      <div className=\"flex gap-0.5 items-end h-full\">\n                        <motion.div \n                          animate={{ height: [3, 10, 5, 12, 3] }} \n                          transition={{ repeat: Infinity, duration: 1 }} \n                          className=\"w-0.5 bg-primary rounded-full\" \n                        />\n                        <motion.div \n                          animate={{ height: [6, 3, 10, 3, 8] }} \n                          transition={{ repeat: Infinity, duration: 0.8 }} \n                          className=\"w-0.5 bg-primary rounded-full\" \n                        />\n                        <motion.div \n                          animate={{ height: [8, 12, 3, 12, 6] }} \n                          transition={{ repeat: Infinity, duration: 1.2 }} \n                          className=\"w-0.5 bg-primary rounded-full\" \n                        />\n                      </div>\n                    ) : (\n                      <span className=\"text-[8px] font-black uppercase tracking-[0.2em] opacity-20\">\n                        Standby\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </motion.button>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AANA;;;;;;AAQA,MAAM,YAAY;IAChB;QAAE,MAAM,sNAAO;QAAE,OAAO;QAAQ,MAAM;IAAO;IAC7C;QAAE,MAAM,kOAAM;QAAE,OAAO;QAAW,MAAM;IAAU;IAClD;QAAE,MAAM,gNAAK;QAAE,OAAO;QAAa,MAAM;IAAY;IACrD;QAAE,MAAM,gNAAK;QAAE,OAAO;QAAW,MAAM;IAAU;IACjD;QAAE,MAAM,yNAAQ;QAAE,OAAO;QAAY,MAAM;IAAW;CACvD;AAEM,SAAS,aAAa,EAAE,WAAW,EAA4B;;IACpE,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,sJAAQ;IAEvF,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoF;;;;;;kCAGlG,6LAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,WAAW,gBAAgB,KAAK,IAAI;4BAC1C,qBACE,6LAAC,+IAAM;gCAEL,SAAQ;gCACR,SAAS,IAAM,eAAe,KAAK,IAAI;gCACvC,WAAW,IAAA,4HAAE,EACX,2GACA,WACI,mDACA;;kDAGN,6LAAC,KAAK,IAAI;wCAAC,WAAW,IAAA,4HAAE,EACtB,sDACA,WAAW,cAAc;;;;;;kDAE3B,6LAAC;wCAAK,WAAU;kDACb,KAAK,KAAK;;;;;;;+BAfR,KAAK,KAAK;;;;;wBAmBrB;;;;;;;;;;;;0BAKJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoF;;;;;;kCAIlG,6LAAC;wBAAI,WAAU;kCACZ,OAAO,GAAG,CAAC,CAAC;4BACX,MAAM,YAAY,MAAM,aAAa,KAAK;4BAC1C,MAAM,WAAW,cAAc,OAAO,MAAM,EAAE;4BAE9C,qBACE,6LAAC,uMAAM,CAAC,MAAM;gCAEZ,SAAS,IAAM,gBAAgB;gCAC/B,WAAW,IAAA,4HAAE,EACX,iHACA,WACI,iEACA;gCAEN,YAAY;oCAAE,OAAO;gCAAK;gCAC1B,UAAU;oCAAE,OAAO;gCAAK;;oCAGvB,0BACC,6LAAC,uMAAM,CAAC,GAAG;wCACT,UAAS;wCACT,WAAU;;;;;;kDAKd,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAW,IAAA,4HAAE,EAChB,uFACA,WACI,4BACA;0DAEJ,cAAA,6LAAC,gNAAK;oDAAC,WAAW,IAAA,4HAAE,EAClB,0CACA,WAAW,oBAAoB;;;;;;;;;;;4CAKlC,2BACC,6LAAC,uMAAM,CAAC,GAAG;gDACT,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,EAAE;gDACnC,WAAU;gDACV,SAAS;oDAAE,OAAO;wDAAC;wDAAG;wDAAK;qDAAE;gDAAC;gDAC9B,YAAY;oDAAE,QAAQ;oDAAU,UAAU;gDAAE;;;;;;;;;;;;kDAMlD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAW,IAAA,4HAAE,EACjB,qGACA,WAAW,oBAAoB;0DAE9B,MAAM,IAAI;;;;;;0DAIb,6LAAC;gDAAI,WAAU;0DACZ,0BACC,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,uMAAM,CAAC,GAAG;4DACT,SAAS;gEAAE,QAAQ;oEAAC;oEAAG;oEAAI;oEAAG;oEAAI;iEAAE;4DAAC;4DACrC,YAAY;gEAAE,QAAQ;gEAAU,UAAU;4DAAE;4DAC5C,WAAU;;;;;;sEAEZ,6LAAC,uMAAM,CAAC,GAAG;4DACT,SAAS;gEAAE,QAAQ;oEAAC;oEAAG;oEAAG;oEAAI;oEAAG;iEAAE;4DAAC;4DACpC,YAAY;gEAAE,QAAQ;gEAAU,UAAU;4DAAI;4DAC9C,WAAU;;;;;;sEAEZ,6LAAC,uMAAM,CAAC,GAAG;4DACT,SAAS;gEAAE,QAAQ;oEAAC;oEAAG;oEAAI;oEAAG;oEAAI;iEAAE;4DAAC;4DACrC,YAAY;gEAAE,QAAQ;gEAAU,UAAU;4DAAI;4DAC9C,WAAU;;;;;;;;;;;yEAId,6LAAC;oDAAK,WAAU;8DAA8D;;;;;;;;;;;;;;;;;;+BA1E/E,MAAM,EAAE;;;;;wBAkFnB;;;;;;;;;;;;;;;;;;AAKV;GA1IgB;;QACiE,sJAAQ;;;KADzE"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/dashboard/favorite-grid.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Play, MoreVertical, Heart, ArrowRight } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nexport function FavoriteGrid() {\n  const { favorites, currentGroup, refreshState } = useSonos();\n\n  const playFavorite = async (favoriteId: string) => {\n    if (!currentGroup) return;\n    await fetch(`/api/sonos/control?groupId=${currentGroup.id}&favoriteId=${favoriteId}`, { method: \"POST\" });\n    refreshState();\n  };\n\n  if (!favorites || favorites.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-10 animate-in fade-in zoom-in duration-1000\">\n        <div className=\"relative h-48 w-48 flex items-center justify-center\">\n          <div className=\"absolute inset-0 bg-primary/5 blur-[60px] rounded-full animate-pulse\" />\n          <Play className=\"h-20 w-20 text-muted-foreground opacity-10\" />\n        </div>\n        <div className=\"space-y-3 max-w-sm\">\n          <h3 className=\"text-3xl font-black tracking-tight italic uppercase opacity-40\">Your Gallery is Empty</h3>\n          <p className=\"text-muted-foreground font-bold text-sm tracking-tight leading-relaxed px-8 opacity-60 uppercase\">\n            Curate your collection in the Sonos app to display your favorites here.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-20\">\n      <div className=\"flex items-end justify-between border-b border-white/5 pb-10\">\n        <div className=\"space-y-2\">\n          <p className=\"text-[10px] font-black uppercase tracking-[0.6em] text-primary\">Discovery</p>\n          <h2 className=\"text-6xl lg:text-7xl font-black tracking-tighter italic uppercase leading-none\">Your Library</h2>\n        </div>\n        <button className=\"h-16 w-16 rounded-[2rem] bg-secondary/50 hover:bg-secondary flex items-center justify-center transition-all group border border-white/5\">\n          <ArrowRight className=\"h-6 w-6 group-hover:translate-x-1 transition-transform\" />\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-x-12 gap-y-20\">\n        {favorites.map((favorite: any, index: number) => (\n          <motion.div\n            key={favorite.id}\n            initial={{ opacity: 0, y: 40 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.05, duration: 1, ease: [0.22, 1, 0.36, 1] }}\n            onClick={() => playFavorite(favorite.id)}\n            className=\"group cursor-pointer\"\n          >\n            {/* Massive Editorial Artwork */}\n            <div className=\"relative aspect-[4/5] rounded-[3.5rem] lg:rounded-[4.5rem] overflow-hidden bg-secondary shadow-[0_40px_100px_-20px_rgba(0,0,0,0.3)] group-hover:shadow-[0_60px_120px_-30px_rgba(0,0,0,0.5)] transition-all duration-700 ease-[0.22,1,0.36,1]\">\n              {favorite.imageUrl ? (\n                <img\n                  src={favorite.imageUrl}\n                  alt={favorite.name}\n                  className=\"object-cover w-full h-full transition-all duration-1000 group-hover:scale-110 grayscale-[30%] group-hover:grayscale-0 saturate-[0.8] group-hover:saturate-100\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-gradient-to-br from-secondary to-background flex items-center justify-center\">\n                  <span className=\"text-foreground/5 text-9xl font-black italic select-none\">ART</span>\n                </div>\n              )}\n              \n              {/* Cinematic Overlay */}\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-40 group-hover:opacity-60 transition-opacity duration-700\" />\n              \n              <div className=\"absolute inset-0 flex flex-col justify-end p-10 opacity-0 group-hover:opacity-100 transition-all duration-500 translate-y-4 group-hover:translate-y-0\">\n                <div className=\"h-20 w-20 rounded-[2rem] bg-white text-black flex items-center justify-center shadow-2xl mb-6\">\n                  <Play className=\"h-8 w-8 fill-current ml-1\" />\n                </div>\n                <div className=\"space-y-1\">\n                  <span className=\"text-[10px] font-black uppercase tracking-[0.4em] text-white/60\">Press to Play</span>\n                  <p className=\"text-white text-xl font-black italic uppercase leading-tight truncate\">{favorite.name}</p>\n                </div>\n              </div>\n            </div>\n            \n            {/* Modern Typography Details */}\n            <div className=\"mt-10 px-6 space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-col min-w-0\">\n                  <h3 className=\"font-black text-2xl lg:text-3xl tracking-tighter leading-none truncate uppercase italic group-hover:text-primary transition-colors duration-500\">{favorite.name}</h3>\n                  <p className=\"text-sm font-bold text-muted-foreground uppercase tracking-widest mt-2 opacity-40 truncate\">\n                    {favorite.description || \"Collection\"}\n                  </p>\n                </div>\n                <button className=\"h-10 w-10 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors shrink-0\">\n                  <MoreVertical className=\"h-5 w-5 opacity-20\" />\n                </button>\n              </div>\n              \n              <div className=\"flex items-center gap-3 pt-2\">\n                <div className=\"h-px flex-1 bg-white/5 group-hover:bg-primary/20 transition-colors duration-700\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] opacity-20\">Sonos Fav</span>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,IAAA,sJAAQ;IAE1D,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,cAAc;QACnB,MAAM,MAAM,CAAC,2BAA2B,EAAE,aAAa,EAAE,CAAC,YAAY,EAAE,YAAY,EAAE;YAAE,QAAQ;QAAO;QACvG;IACF;IAEA,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;QACxC,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;;8BAElB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAiE;;;;;;sCAC/E,6LAAC;4BAAE,WAAU;sCAAmG;;;;;;;;;;;;;;;;;;IAMxH;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAiE;;;;;;0CAC9E,6LAAC;gCAAG,WAAU;0CAAiF;;;;;;;;;;;;kCAEjG,6LAAC;wBAAO,WAAU;kCAChB,cAAA,6LAAC,mOAAU;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAI1B,6LAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,UAAe,sBAC7B,6LAAC,uMAAM,CAAC,GAAG;wBAET,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,YAAY;4BAAE,OAAO,QAAQ;4BAAM,UAAU;4BAAG,MAAM;gCAAC;gCAAM;gCAAG;gCAAM;6BAAE;wBAAC;wBACzE,SAAS,IAAM,aAAa,SAAS,EAAE;wBACvC,WAAU;;0CAGV,6LAAC;gCAAI,WAAU;;oCACZ,SAAS,QAAQ,iBAChB,6LAAC;wCACC,KAAK,SAAS,QAAQ;wCACtB,KAAK,SAAS,IAAI;wCAClB,WAAU;;;;;6DAGZ,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAK,WAAU;sDAA2D;;;;;;;;;;;kDAK/E,6LAAC;wCAAI,WAAU;;;;;;kDAEf,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,6MAAI;oDAAC,WAAU;;;;;;;;;;;0DAElB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAU;kEAAkE;;;;;;kEAClF,6LAAC;wDAAE,WAAU;kEAAyE,SAAS,IAAI;;;;;;;;;;;;;;;;;;;;;;;;0CAMzG,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAG,WAAU;kEAAmJ,SAAS,IAAI;;;;;;kEAC9K,6LAAC;wDAAE,WAAU;kEACV,SAAS,WAAW,IAAI;;;;;;;;;;;;0DAG7B,6LAAC;gDAAO,WAAU;0DAChB,cAAA,6LAAC,6OAAY;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAI5B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;;;;;0DACf,6LAAC;gDAAK,WAAU;0DAA+D;;;;;;;;;;;;;;;;;;;uBAnD9E,SAAS,EAAE;;;;;;;;;;;;;;;;AA2D5B;GApGgB;;QACoC,sJAAQ;;;KAD5C"}},
    {"offset": {"line": 775, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/hooks/use-spotify-auth.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\n\nconst SPOTIFY_CLIENT_ID = process.env.NEXT_PUBLIC_SPOTIFY_CLIENT_ID || \"\";\n\n// Generate PKCE code verifier and challenge\nfunction generateCodeVerifier(): string {\n  const array = new Uint32Array(56 / 2);\n  crypto.getRandomValues(array);\n  return Array.from(array, dec => ('0' + dec.toString(16)).substring(1)).join('');\n}\n\nasync function generateCodeChallenge(verifier: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(verifier);\n  const digest = await crypto.subtle.digest('SHA-256', data);\n  return btoa(String.fromCharCode(...new Uint8Array(digest)))\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n    .replace(/=/g, '');\n}\n\nexport function useSpotifyAuth() {\n  const [isConnected, setIsConnected] = useState<boolean | null>(null);\n  const searchParams = useSearchParams();\n\n  useEffect(() => {\n    // Check if we have a token stored\n    const token = localStorage.getItem('spotify_access_token');\n    \n    // Handle callback first\n    const code = searchParams.get('code');\n    if (code) {\n      handleCallback(code);\n      return;\n    }\n    \n    setIsConnected(!!token);\n  }, [searchParams]);\n\n  const handleCallback = async (code: string) => {\n    const verifier = localStorage.getItem('spotify_code_verifier');\n    if (!verifier) return;\n\n    const redirectUri = typeof window !== 'undefined' \n      ? `${window.location.origin}/api/spotify/callback`\n      : 'https://lvh.me:3000/api/spotify/callback';\n\n    try {\n      const response = await fetch('/api/spotify/token', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ code, verifier, redirect_uri: redirectUri }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        localStorage.setItem('spotify_access_token', data.access_token);\n        localStorage.setItem('spotify_refresh_token', data.refresh_token);\n        localStorage.setItem('spotify_token_expires', String(Date.now() + data.expires_in * 1000));\n        setIsConnected(true);\n        window.history.replaceState({}, '', window.location.pathname);\n      }\n    } catch (error) {\n      console.error('Token exchange failed:', error);\n    }\n  };\n\n  const connect = async () => {\n    if (!SPOTIFY_CLIENT_ID) {\n      alert('Spotify Client ID not configured. Please add NEXT_PUBLIC_SPOTIFY_CLIENT_ID to .env');\n      return;\n    }\n\n    const verifier = generateCodeVerifier();\n    const challenge = await generateCodeChallenge(verifier);\n    \n    localStorage.setItem('spotify_code_verifier', verifier);\n\n    const redirectUri = typeof window !== 'undefined' \n      ? `${window.location.origin}/api/spotify/callback`\n      : 'https://lvh.me:3000/api/spotify/callback';\n    \n    const params = new URLSearchParams({\n      client_id: SPOTIFY_CLIENT_ID,\n      response_type: 'code',\n      redirect_uri: redirectUri,\n      scope: 'user-read-private user-read-email user-library-read user-read-recently-played playlist-read-private playlist-read-collaborative user-read-playback-state',\n      code_challenge_method: 'S256',\n      code_challenge: challenge,\n    });\n\n    window.location.href = `https://accounts.spotify.com/authorize?${params.toString()}`;\n  };\n\n  const disconnect = () => {\n    localStorage.removeItem('spotify_access_token');\n    localStorage.removeItem('spotify_refresh_token');\n    localStorage.removeItem('spotify_token_expires');\n    localStorage.removeItem('spotify_code_verifier');\n    setIsConnected(false);\n  };\n\n  const getToken = async (): Promise<string | null> => {\n    const token = localStorage.getItem('spotify_access_token');\n    const expires = localStorage.getItem('spotify_token_expires');\n    \n    if (!token || !expires) return null;\n    \n    if (Date.now() < parseInt(expires)) {\n      return token;\n    }\n\n    // Token expired, refresh it\n    const refreshToken = localStorage.getItem('spotify_refresh_token');\n    if (!refreshToken) return null;\n\n    try {\n      const response = await fetch('/api/spotify/refresh', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ refresh_token: refreshToken }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        localStorage.setItem('spotify_access_token', data.access_token);\n        localStorage.setItem('spotify_token_expires', String(Date.now() + data.expires_in * 1000));\n        if (data.refresh_token) {\n          localStorage.setItem('spotify_refresh_token', data.refresh_token);\n        }\n        return data.access_token;\n      }\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n    }\n\n    return null;\n  };\n\n  return { isConnected, connect, disconnect, getToken };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/dashboard/library-page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Play, Heart, Music, Disc, Users, ListMusic, ChevronRight, Loader2, Search } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { useSpotifyAuth } from \"@/hooks/use-spotify-auth\";\n\nexport function LibraryPage() {\n  const { currentGroup, refreshState, favorites } = useSonos();\n  const { isConnected: spotifyConnected, connect: connectSpotify, getToken } = useSpotifyAuth();\n  const [services, setServices] = useState<any[]>([]);\n  const [currentPath, setCurrentPath] = useState<any[]>([]);\n  const [items, setItems] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState<{ accountId: string; serviceId: string } | null>(null);\n  const [showSearch, setShowSearch] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n\n  useEffect(() => {\n    loadMusicServices();\n  }, [favorites]);\n\n  useEffect(() => {\n    if (selectedAccount) {\n      setCurrentPath([]);\n      browseContainer(selectedAccount.accountId, selectedAccount.serviceId);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedAccount]);\n\n  const loadMusicServices = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/sonos/library\");\n      if (res.ok) {\n        const data = await res.json();\n        // Handle both musicServiceAccounts and items arrays\n        const servicesList = data.musicServiceAccounts || data.items || data.musicServices || [];\n        \n        if (servicesList.length > 0) {\n          setServices(servicesList);\n        } else {\n          // If still no services, try extracting from playback state\n          if (currentGroup) {\n            try {\n              const pbRes = await fetch(`/api/sonos/playback?groupId=${currentGroup.id}`);\n              if (pbRes.ok) {\n                const pbData = await pbRes.json();\n                const servicesMap = new Map();\n                \n                // Extract from current item\n                if (pbData.currentItem?.track?.service) {\n                  const service = pbData.currentItem.track.service;\n                  const accountId = pbData.currentItem.track.id?.accountId || `sn_${service.id}`;\n                  servicesMap.set(accountId, {\n                    id: service.id,\n                    accountId: accountId,\n                    name: service.name,\n                    images: service.images || [],\n                  });\n                }\n                \n                // Extract from container\n                if (pbData.container?.service) {\n                  const service = pbData.container.service;\n                  const accountId = pbData.container.id?.accountId || `sn_${service.id}`;\n                  servicesMap.set(accountId, {\n                    id: service.id,\n                    accountId: accountId,\n                    name: service.name,\n                    images: service.images || [],\n                  });\n                }\n                \n                if (servicesMap.size > 0) {\n                  setServices(Array.from(servicesMap.values()));\n                }\n              }\n            } catch (error) {\n              console.error(\"Failed to extract from playback:\", error);\n            }\n          }\n        }\n      } else {\n        const errorData = await res.json();\n        console.error(\"Library API error:\", errorData);\n      }\n    } catch (error) {\n      console.error(\"Failed to load music services:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const browseContainer = async (accountId: string, serviceId: string, containerId?: string) => {\n    setLoading(true);\n    setShowSearch(false);\n    \n    try {\n      // For Spotify, use Spotify Web API with client-side auth\n      if (serviceId === \"9\") {\n        const token = await getToken();\n        if (!token) {\n          setItems([]);\n          return;\n        }\n\n        let endpoint = \"/me/playlists?limit=50\";\n        let containerName = \"Your Playlists\";\n\n        if (containerId?.includes(\"library\")) {\n          endpoint = \"/me/tracks?limit=50\";\n          containerName = \"Your Library\";\n        } else if (containerId?.includes(\"recently-played\") || containerId?.includes(\"recent\")) {\n          endpoint = \"/me/player/recently-played?limit=50\";\n          containerName = \"Recently Played\";\n        }\n\n        const res = await fetch(`/api/spotify/proxy?endpoint=${encodeURIComponent(endpoint)}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\n        if (res.ok) {\n          const data = await res.json();\n          const items = data.items || data.tracks?.items || [];\n          \n          setItems(items.map((item: any) => {\n            const track = item.track || item;\n            return {\n              id: { objectId: track.uri || item.uri, serviceId: \"9\", accountId: \"sn_2\" },\n              name: track.name || item.name,\n              imageUrl: track.album?.images?.[0]?.url || item.images?.[0]?.url,\n              images: track.album?.images || item.images,\n              type: track.uri ? \"track\" : \"playlist\",\n              _objectType: track.uri ? \"track\" : \"container\",\n              artist: track.artists ? { name: track.artists.map((a: any) => a.name).join(\", \") } : undefined,\n              description: item.tracks?.total ? `${item.tracks.total} tracks` : undefined,\n            };\n          }));\n\n          setCurrentPath([{ name: containerName, id: { objectId: containerId || endpoint } }]);\n        } else {\n          setItems([]);\n        }\n      } else {\n        // For other services, use Sonos API\n        const params = new URLSearchParams({ accountId });\n        if (containerId) params.append(\"containerId\", containerId);\n        \n        const res = await fetch(`/api/sonos/library?${params.toString()}`);\n        if (res.ok) {\n          const data = await res.json();\n          const newItems = data.containers || data.items || [];\n          setItems(newItems);\n          \n          if (containerId) {\n            const containerName = containerId.includes(\"playlists\") ? \"Your Playlists\" :\n                                 containerId.includes(\"library\") ? \"Your Library\" :\n                                 containerId.includes(\"recently-played\") ? \"Recently Played\" :\n                                 \"Browse\";\n            \n            setCurrentPath((prev) => {\n              const filtered = prev.filter((item: any) => {\n                const itemId = item.id?.objectId || item.objectId;\n                return itemId !== containerId;\n              });\n              return [...filtered, { name: containerName, id: { objectId: containerId } }];\n            });\n          } else {\n            setCurrentPath([]);\n          }\n        } else {\n          setItems([]);\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to browse:\", error);\n      setItems([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePlay = async (item: any) => {\n    if (!currentGroup) return;\n    \n    const itemId = item.id?.objectId || item.objectId;\n    const serviceId = item.id?.serviceId || item.serviceId || selectedAccount?.serviceId;\n    const accountId = item.id?.accountId || item.accountId || selectedAccount?.accountId;\n\n    if (!itemId || !serviceId || !accountId) {\n      console.error(\"Missing item information:\", item);\n      return;\n    }\n\n    try {\n      await fetch(\"/api/sonos/library/action?action=play&groupId=\" + currentGroup.id, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ itemId, serviceId, accountId }),\n      });\n      refreshState();\n    } catch (error) {\n      console.error(\"Failed to play:\", error);\n    }\n  };\n\n  const handleAddToFavorites = async (item: any) => {\n    const itemId = item.id?.objectId || item.objectId;\n    const serviceId = item.id?.serviceId || item.serviceId || selectedAccount?.serviceId;\n    const accountId = item.id?.accountId || item.accountId || selectedAccount?.accountId;\n    const name = item.name || item.title;\n\n    if (!itemId || !serviceId || !accountId || !name) {\n      console.error(\"Missing item information:\", item);\n      return;\n    }\n\n    try {\n      await fetch(\"/api/sonos/library/action?action=favorite\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ itemId, serviceId, accountId, name }),\n      });\n      refreshState();\n    } catch (error) {\n      console.error(\"Failed to add to favorites:\", error);\n    }\n  };\n\n  const getItemIcon = (item: any) => {\n    const type = item.type || item._objectType || \"\";\n    if (type.includes(\"album\")) return Disc;\n    if (type.includes(\"artist\")) return Users;\n    if (type.includes(\"playlist\")) return ListMusic;\n    return Music;\n  };\n\n  const handleSearch = async (term: string) => {\n    if (!selectedAccount || !term.trim()) return;\n    \n    setLoading(true);\n    try {\n      // For Spotify, use Spotify Web API\n      if (selectedAccount.serviceId === \"9\") {\n        const token = await getToken();\n        if (!token) {\n          setSearchResults([]);\n          return;\n        }\n\n        const res = await fetch(`/api/spotify/proxy?endpoint=${encodeURIComponent(`/search?q=${encodeURIComponent(term)}&type=track,album,playlist,artist&limit=50`)}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\n        if (res.ok) {\n          const data = await res.json();\n          const results = [\n            ...(data.tracks?.items || []).map((track: any) => ({\n              id: { objectId: track.uri, serviceId: \"9\", accountId: \"sn_2\" },\n              name: track.name,\n              imageUrl: track.album?.images?.[0]?.url,\n              type: \"track\",\n              _objectType: \"track\",\n              artist: { name: track.artists.map((a: any) => a.name).join(\", \") },\n            })),\n            ...(data.albums?.items || []).map((album: any) => ({\n              id: { objectId: album.uri, serviceId: \"9\", accountId: \"sn_2\" },\n              name: album.name,\n              imageUrl: album.images?.[0]?.url,\n              type: \"album\",\n              _objectType: \"container\",\n              artist: { name: album.artists.map((a: any) => a.name).join(\", \") },\n            })),\n            ...(data.playlists?.items || []).map((playlist: any) => ({\n              id: { objectId: playlist.uri, serviceId: \"9\", accountId: \"sn_2\" },\n              name: playlist.name,\n              imageUrl: playlist.images?.[0]?.url,\n              type: \"playlist\",\n              _objectType: \"container\",\n            })),\n          ];\n          setSearchResults(results);\n        } else {\n          setSearchResults([]);\n        }\n      } else {\n        // For other services, use Sonos API\n        const res = await fetch(`/api/sonos/library/search?accountId=${selectedAccount.accountId}&term=${encodeURIComponent(term)}`, {\n          method: \"POST\",\n        });\n        \n        if (res.ok) {\n          const data = await res.json();\n          setSearchResults(data.results || data.items || []);\n        } else {\n          setSearchResults([]);\n        }\n      }\n    } catch (error) {\n      console.error(\"Search failed:\", error);\n      setSearchResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderItem = (item: any, idx: number) => {\n    const Icon = getItemIcon(item);\n    const imageUrl = item.imageUrl || item.images?.[0]?.url;\n    const itemName = item.name || item.title;\n    const isContainer = item.type?.includes(\"container\") || item._objectType === \"container\";\n\n    return (\n      <motion.div\n        key={item.id?.objectId || item.id || idx}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: idx * 0.05 }}\n        className=\"group relative\"\n      >\n        <div className=\"aspect-square rounded-2xl overflow-hidden bg-foreground/[0.03] border border-foreground/[0.05] hover:border-foreground/20 transition-all cursor-pointer\">\n          {imageUrl ? (\n            <img src={imageUrl} alt={itemName} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center\">\n              <Icon className=\"h-12 w-12 text-muted-foreground\" />\n            </div>\n          )}\n          \n          {/* Overlay Actions */}\n          <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4\">\n            {isContainer ? (\n              <Button\n                variant=\"default\"\n                size=\"icon\"\n                className=\"h-14 w-14 rounded-full bg-foreground text-background\"\n                onClick={() => {\n                  const containerId = item.id?.objectId || item.objectId;\n                  if (selectedAccount) {\n                    browseContainer(selectedAccount.accountId, selectedAccount.serviceId, containerId);\n                  }\n                }}\n              >\n                <ChevronRight className=\"h-6 w-6\" />\n              </Button>\n            ) : (\n              <>\n                <Button\n                  variant=\"default\"\n                  size=\"icon\"\n                  className=\"h-14 w-14 rounded-full bg-foreground text-background\"\n                  onClick={() => handlePlay(item)}\n                >\n                  <Play className=\"h-6 w-6 fill-current ml-0.5\" />\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-12 w-12 rounded-full bg-white/10 text-white hover:bg-white/20\"\n                  onClick={() => handleAddToFavorites(item)}\n                >\n                  <Heart className=\"h-5 w-5\" />\n                </Button>\n              </>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"mt-3\">\n          <p className=\"font-black text-xs uppercase italic truncate\">{itemName}</p>\n          {item.artist?.name && (\n            <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest mt-1 truncate\">\n              {item.artist.name}\n            </p>\n          )}\n        </div>\n      </motion.div>\n    );\n  };\n\n  if (loading && services.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!selectedAccount) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h2 className=\"text-3xl font-black uppercase italic tracking-tighter mb-2\">Music Services</h2>\n          <p className=\"text-sm text-muted-foreground uppercase tracking-widest\">Select a service to browse</p>\n        </div>\n        \n        {services.length === 0 && !loading ? (\n          <div className=\"flex flex-col items-center justify-center h-64\">\n            <Music className=\"h-16 w-16 text-muted-foreground opacity-20 mb-4\" />\n            <p className=\"text-muted-foreground uppercase tracking-widest\">No music services found</p>\n            <p className=\"text-xs text-muted-foreground mt-2\">Connect music services in your Sonos app</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n            {services.map((service) => (\n              <motion.button\n                key={service.accountId || service.id}\n                onClick={() => setSelectedAccount({ \n                  accountId: service.accountId || `sn_${service.id}`, \n                  serviceId: service.id || service.serviceId \n                })}\n                className=\"group relative aspect-square rounded-3xl overflow-hidden bg-foreground/[0.03] border border-foreground/[0.05] hover:border-foreground/20 transition-all\"\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n              >\n                {service.images?.[0]?.url ? (\n                  <img src={service.images[0].url} alt={service.name} className=\"w-full h-full object-cover\" />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center\">\n                    <Music className=\"h-12 w-12 text-muted-foreground\" />\n                  </div>\n                )}\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n                <div className=\"absolute bottom-0 left-0 right-0 p-4 text-left\">\n                  <p className=\"font-black text-sm uppercase italic text-white\">{service.name}</p>\n                </div>\n              </motion.button>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Breadcrumb */}\n      <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n        <button \n          onClick={() => {\n            setCurrentPath([]);\n            if (selectedAccount) {\n              browseContainer(selectedAccount.accountId, selectedAccount.serviceId);\n            }\n          }} \n          className=\"hover:text-foreground transition-colors\"\n        >\n          Library\n        </button>\n        {currentPath.map((item, idx) => (\n          <div key={idx} className=\"flex items-center gap-2\">\n            <ChevronRight className=\"h-4 w-4\" />\n            <button\n              onClick={() => {\n                const newPath = currentPath.slice(0, idx + 1);\n                setCurrentPath(newPath);\n                const containerId = item.id?.objectId || item.objectId;\n                if (selectedAccount) {\n                  browseContainer(selectedAccount.accountId, selectedAccount.serviceId, containerId);\n                }\n              }}\n              className=\"hover:text-foreground transition-colors\"\n            >\n              {item.name}\n            </button>\n          </div>\n        ))}\n      </div>\n\n      {/* Search Interface */}\n      {showSearch && selectedAccount && (\n        <div className=\"mb-6 space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === \"Enter\" && searchTerm.trim()) {\n                  handleSearch(searchTerm.trim());\n                }\n              }}\n              placeholder=\"Search Spotify...\"\n              className=\"flex-1 px-6 py-4 rounded-2xl bg-foreground/[0.03] border border-foreground/[0.05] focus:border-foreground/20 outline-none font-bold uppercase tracking-widest text-sm\"\n            />\n            <Button\n              onClick={() => {\n                if (searchTerm.trim()) {\n                  handleSearch(searchTerm.trim());\n                }\n              }}\n              className=\"px-8 py-4 rounded-2xl bg-foreground text-background font-black uppercase tracking-widest\"\n            >\n              Search\n            </Button>\n            <Button\n              variant=\"ghost\"\n              onClick={() => {\n                setShowSearch(false);\n                setSearchTerm(\"\");\n                setSearchResults([]);\n                if (selectedAccount) {\n                  browseContainer(selectedAccount.accountId, selectedAccount.serviceId);\n                }\n              }}\n              className=\"px-6 py-4 rounded-2xl\"\n            >\n              Cancel\n            </Button>\n          </div>\n          \n          {searchResults.length > 0 && (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              {searchResults.map((item, idx) => renderItem(item, idx))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Items Grid */}\n      {loading ? (\n        <div className=\"flex items-center justify-center h-64\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n      ) : items.length === 0 && !showSearch ? (\n        <div className=\"space-y-6\">\n          {/* Quick access buttons for Spotify */}\n          {selectedAccount?.serviceId === \"9\" && spotifyConnected ? (\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\">\n              <Button\n                onClick={() => {\n                  if (selectedAccount) {\n                    browseContainer(selectedAccount.accountId, selectedAccount.serviceId, \"playlists\");\n                  }\n                }}\n                className=\"h-24 rounded-2xl bg-foreground/[0.03] border border-foreground/[0.05] hover:bg-foreground/[0.06] flex flex-col items-center justify-center gap-2\"\n              >\n                <ListMusic className=\"h-6 w-6\" />\n                <span className=\"text-xs font-black uppercase tracking-widest\">Playlists</span>\n              </Button>\n              <Button\n                onClick={() => {\n                  if (selectedAccount) {\n                    browseContainer(selectedAccount.accountId, selectedAccount.serviceId, \"library\");\n                  }\n                }}\n                className=\"h-24 rounded-2xl bg-foreground/[0.03] border border-foreground/[0.05] hover:bg-foreground/[0.06] flex flex-col items-center justify-center gap-2\"\n              >\n                <Music className=\"h-6 w-6\" />\n                <span className=\"text-xs font-black uppercase tracking-widest\">Library</span>\n              </Button>\n              <Button\n                onClick={() => {\n                  if (selectedAccount) {\n                    browseContainer(selectedAccount.accountId, selectedAccount.serviceId, \"recently-played\");\n                  }\n                }}\n                className=\"h-24 rounded-2xl bg-foreground/[0.03] border border-foreground/[0.05] hover:bg-foreground/[0.06] flex flex-col items-center justify-center gap-2\"\n              >\n                <Play className=\"h-6 w-6\" />\n                <span className=\"text-xs font-black uppercase tracking-widest\">Recent</span>\n              </Button>\n              <Button\n                onClick={() => setShowSearch(true)}\n                className=\"h-24 rounded-2xl bg-foreground/[0.03] border border-foreground/[0.05] hover:bg-foreground/[0.06] flex flex-col items-center justify-center gap-2\"\n              >\n                <Search className=\"h-6 w-6\" />\n                <span className=\"text-xs font-black uppercase tracking-widest\">Search</span>\n              </Button>\n            </div>\n          ) : selectedAccount?.serviceId === \"9\" && spotifyConnected === false ? (\n            <div className=\"flex flex-col items-center justify-center h-64 bg-foreground/[0.02] rounded-3xl border border-foreground/[0.05]\">\n              <Music className=\"h-16 w-16 text-muted-foreground opacity-20 mb-4\" />\n              <p className=\"text-muted-foreground uppercase tracking-widest mb-2 text-center\">Connect Spotify</p>\n              <p className=\"text-xs text-muted-foreground text-center max-w-md px-4 mb-6\">\n                Connect your Spotify account to browse playlists, recently played tracks, and search the catalog.\n              </p>\n              <Button\n                onClick={connectSpotify}\n                className=\"px-8 py-4 rounded-2xl bg-[#1DB954] text-white font-black uppercase tracking-widest hover:bg-[#1ed760] transition-colors\"\n              >\n                Connect Spotify\n              </Button>\n            </div>\n          ) : null}\n\n          {/* Show favorites from this service */}\n          {favorites.length > 0 && (\n            <div>\n              <h3 className=\"text-xl font-black uppercase italic tracking-tighter mb-6\">Your Sonos Favorites</h3>\n              <p className=\"text-xs text-muted-foreground uppercase tracking-widest mb-4\">\n                Content saved in your Sonos app\n              </p>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n                {favorites\n                  .filter((fav: any) => {\n                    const favServiceId = fav.service?.id || fav.serviceId;\n                    return favServiceId === selectedAccount?.serviceId;\n                  })\n                  .map((item, idx) => renderItem(item, idx))}\n              </div>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n          {items.map((item, idx) => renderItem(item, idx))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1962, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/dashboard/settings-page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Settings, Music, Radio, Check, X, LogOut, RefreshCw, Loader2 } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { useSpotifyAuth } from \"@/hooks/use-spotify-auth\";\n\nexport function SettingsPage() {\n  const { refreshState } = useSonos();\n  const { isConnected: spotifyConnected, connect: connectSpotify, disconnect: disconnectSpotify } = useSpotifyAuth();\n  const [sonosConnected, setSonosConnected] = useState<boolean>(false);\n  const [loading, setLoading] = useState(false);\n  const [checking, setChecking] = useState(true);\n\n  useEffect(() => {\n    checkConnections();\n  }, []);\n\n  const checkConnections = async () => {\n    setChecking(true);\n    \n    // Check Sonos connection\n    try {\n      const res = await fetch(\"/api/sonos/state\");\n      setSonosConnected(res.ok);\n    } catch (error) {\n      setSonosConnected(false);\n    }\n    \n    setChecking(false);\n  };\n\n  const reconnectSonos = async () => {\n    window.location.href = \"/api/sonos/login\";\n  };\n\n  const disconnectSonos = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/sonos/disconnect\", { method: \"POST\" });\n      if (res.ok) {\n        setSonosConnected(false);\n        await checkConnections();\n        // Redirect to setup if disconnected\n        window.location.href = \"/setup\";\n      }\n    } catch (error) {\n      console.error(\"Failed to disconnect Sonos:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (checking) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8 max-w-4xl\">\n      <div>\n        <h1 className=\"text-4xl font-black uppercase italic tracking-tighter mb-2\">Settings</h1>\n        <p className=\"text-sm text-muted-foreground uppercase tracking-widest\">Manage your connections</p>\n      </div>\n\n      {/* Sonos Connection */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"rounded-3xl bg-foreground/[0.02] border border-foreground/[0.05] p-8 space-y-6\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-12 w-12 rounded-2xl bg-foreground/[0.05] flex items-center justify-center\">\n              <Radio className=\"h-6 w-6 text-foreground\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-black uppercase italic tracking-tighter\">Sonos Account</h2>\n              <p className=\"text-xs text-muted-foreground uppercase tracking-widest mt-1\">\n                Control your Sonos speakers\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            {sonosConnected ? (\n              <>\n                <div className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20\">\n                  <Check className=\"h-4 w-4 text-primary\" />\n                  <span className=\"text-xs font-black uppercase tracking-widest text-primary\">Connected</span>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  onClick={disconnectSonos}\n                  disabled={loading}\n                  className=\"px-6 py-2 rounded-2xl\"\n                >\n                  <LogOut className=\"h-4 w-4 mr-2\" />\n                  Disconnect\n                </Button>\n              </>\n            ) : (\n              <Button\n                onClick={reconnectSonos}\n                className=\"px-6 py-2 rounded-2xl bg-foreground text-background font-black uppercase tracking-widest\"\n              >\n                Connect Sonos\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {sonosConnected && (\n          <div className=\"pt-4 border-t border-foreground/[0.05]\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground uppercase tracking-widest\">Status</span>\n              <span className=\"font-black text-foreground\">Active</span>\n            </div>\n            <div className=\"flex items-center justify-between text-sm mt-2\">\n              <span className=\"text-muted-foreground uppercase tracking-widest\">Last Sync</span>\n              <span className=\"font-black text-foreground\">Just now</span>\n            </div>\n          </div>\n        )}\n      </motion.div>\n\n      {/* Spotify Connection */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1 }}\n        className=\"rounded-3xl bg-foreground/[0.02] border border-foreground/[0.05] p-8 space-y-6\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-12 w-12 rounded-2xl bg-[#1DB954]/10 flex items-center justify-center border border-[#1DB954]/20\">\n              <Music className=\"h-6 w-6 text-[#1DB954]\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-black uppercase italic tracking-tighter\">Spotify Account</h2>\n              <p className=\"text-xs text-muted-foreground uppercase tracking-widest mt-1\">\n                Browse playlists, recently played & search\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            {spotifyConnected ? (\n              <>\n                <div className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-[#1DB954]/10 border border-[#1DB954]/20\">\n                  <Check className=\"h-4 w-4 text-[#1DB954]\" />\n                  <span className=\"text-xs font-black uppercase tracking-widest text-[#1DB954]\">Connected</span>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  onClick={disconnectSpotify}\n                  disabled={loading}\n                  className=\"px-6 py-2 rounded-2xl\"\n                >\n                  <LogOut className=\"h-4 w-4 mr-2\" />\n                  Disconnect\n                </Button>\n              </>\n            ) : (\n              <Button\n                onClick={connectSpotify}\n                disabled={loading}\n                className=\"px-6 py-2 rounded-2xl bg-[#1DB954] text-white font-black uppercase tracking-widest hover:bg-[#1ed760] transition-colors disabled:opacity-50\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Connecting...\n                  </>\n                ) : (\n                  \"Connect Spotify\"\n                )}\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {spotifyConnected && (\n          <div className=\"pt-4 border-t border-foreground/[0.05]\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground uppercase tracking-widest\">Status</span>\n              <span className=\"font-black text-foreground\">Active</span>\n            </div>\n            <div className=\"flex items-center justify-between text-sm mt-2\">\n              <span className=\"text-muted-foreground uppercase tracking-widest\">Access</span>\n              <span className=\"font-black text-foreground\">Full Library Access</span>\n            </div>\n          </div>\n        )}\n\n        {spotifyConnected === false && (\n          <div className=\"pt-4 border-t border-foreground/[0.05]\">\n            <p className=\"text-xs text-muted-foreground\">\n              Connect your Spotify account to browse playlists, recently played tracks, and search the catalog. You'll be redirected to Spotify to log in.\n            </p>\n          </div>\n        )}\n      </motion.div>\n\n      {/* Refresh Button */}\n      <div className=\"flex justify-end\">\n        <Button\n          variant=\"ghost\"\n          onClick={checkConnections}\n          className=\"px-6 py-2 rounded-2xl\"\n        >\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Refresh Status\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;;;AARA;;;;;;;AAUO,SAAS;;IACd,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,sJAAQ;IACjC,MAAM,EAAE,aAAa,gBAAgB,EAAE,SAAS,cAAc,EAAE,YAAY,iBAAiB,EAAE,GAAG,IAAA,2JAAc;IAChH,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAU;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;kCAAC;YACR;QACF;iCAAG,EAAE;IAEL,MAAM,mBAAmB;QACvB,YAAY;QAEZ,yBAAyB;QACzB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,kBAAkB,IAAI,EAAE;QAC1B,EAAE,OAAO,OAAO;YACd,kBAAkB;QACpB;QAEA,YAAY;IACd;IAEA,MAAM,iBAAiB;QACrB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,MAAM,kBAAkB;QACtB,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,yBAAyB;gBAAE,QAAQ;YAAO;YAClE,IAAI,IAAI,EAAE,EAAE;gBACV,kBAAkB;gBAClB,MAAM;gBACN,oCAAoC;gBACpC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;QAC/C,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,UAAU;QACZ,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAC3E,6LAAC;wBAAE,WAAU;kCAA0D;;;;;;;;;;;;0BAIzE,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,gNAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAuD;;;;;;0DACrE,6LAAC;gDAAE,WAAU;0DAA+D;;;;;;;;;;;;;;;;;;0CAKhF,6LAAC;gCAAI,WAAU;0CACZ,+BACC;;sDACE,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,gNAAK;oDAAC,WAAU;;;;;;8DACjB,6LAAC;oDAAK,WAAU;8DAA4D;;;;;;;;;;;;sDAE9E,6LAAC,+IAAM;4CACL,SAAQ;4CACR,SAAS;4CACT,UAAU;4CACV,WAAU;;8DAEV,6LAAC,uNAAM;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;iEAKvC,6LAAC,+IAAM;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;oBAON,gCACC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAkD;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;0CAE/C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAkD;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;;;;;;;0BAOrD,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,OAAO;gBAAI;gBACzB,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,gNAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAuD;;;;;;0DACrE,6LAAC;gDAAE,WAAU;0DAA+D;;;;;;;;;;;;;;;;;;0CAKhF,6LAAC;gCAAI,WAAU;0CACZ,iCACC;;sDACE,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,gNAAK;oDAAC,WAAU;;;;;;8DACjB,6LAAC;oDAAK,WAAU;8DAA8D;;;;;;;;;;;;sDAEhF,6LAAC,+IAAM;4CACL,SAAQ;4CACR,SAAS;4CACT,UAAU;4CACV,WAAU;;8DAEV,6LAAC,uNAAM;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;iEAKvC,6LAAC,+IAAM;oCACL,SAAS;oCACT,UAAU;oCACV,WAAU;8CAET,wBACC;;0DACE,6LAAC,+NAAO;gDAAC,WAAU;;;;;;4CAA8B;;uDAInD;;;;;;;;;;;;;;;;;oBAOT,kCACC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAkD;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;0CAE/C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAkD;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;oBAKlD,qBAAqB,uBACpB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;;;;;;0BAQnD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+IAAM;oBACL,SAAQ;oBACR,SAAS;oBACT,WAAU;;sCAEV,6LAAC,gOAAS;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;;;;;;AAMhD;GAnNgB;;QACW,sJAAQ;QACiE,2JAAc;;;KAFlG"}},
    {"offset": {"line": 2543, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;0BAET,6LAAC,8KAAqB;gBAAC,WAAU;0BAC/B,cAAA,6LAAC,8KAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,6LAAC,8KAAqB;gBAAC,WAAU;;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,6KAAoB,CAAC,WAAW"}},
    {"offset": {"line": 2601, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/player/full-screen-player.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { ChevronDown, Play, Pause, SkipBack, SkipForward, Volume2, Repeat, Shuffle, Heart, Share2, ListMusic } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { useState, useEffect } from \"react\";\n\nfunction formatTime(milliseconds: number): string {\n  const totalSeconds = Math.floor(milliseconds / 1000);\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n  return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n}\n\nexport function FullScreenPlayer({ onClose }: { onClose: () => void }) {\n  const { currentGroup, playbackState, volume, setVolume, refreshState, setIsExpanded } = useSonos();\n  const [currentPosition, setCurrentPosition] = useState(0);\n\n  const track = playbackState?.currentItem?.track;\n  const container = playbackState?.container;\n  const metadata = track || container || playbackState?.currentItem;\n  const isPlaying = playbackState?.playbackState === \"PLAYBACK_STATE_PLAYING\";\n  \n  const artwork = track?.imageUrl || container?.imageUrl || metadata?.imageUrl;\n  const title = track?.name || container?.name || metadata?.name || \"No Music Playing\";\n  \n  // Extract artist - Sonos API structure: currentItem.track.artist.name\n  const artist = \n    track?.artist?.name || \n    track?.podcast?.name || \n    container?.name || \n    \"Unknown Artist\";\n  \n  // Extract position and duration from playback state\n  const positionMillis = playbackState?.positionMillis || 0;\n  const durationMillis = metadata?.durationMillis || playbackState?.currentItem?.track?.durationMillis || 0;\n  \n  // Update current position when playback state changes or while playing\n  useEffect(() => {\n    if (playbackState?.positionMillis !== undefined) {\n      setCurrentPosition(playbackState.positionMillis);\n    }\n  }, [playbackState?.positionMillis]);\n\n  // Auto-update position while playing\n  useEffect(() => {\n    if (!isPlaying || durationMillis === 0) return;\n    \n    const interval = setInterval(() => {\n      setCurrentPosition((prev) => {\n        const next = prev + 1000;\n        return next >= durationMillis ? durationMillis : next;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [isPlaying, durationMillis]);\n\n  const progress = durationMillis > 0 ? (currentPosition / durationMillis) * 100 : 0;\n\n  const handleClose = () => {\n    setIsExpanded(false);\n    onClose();\n  };\n\n  const togglePlayback = async () => {\n    const command = isPlaying ? \"pause\" : \"play\";\n    await fetch(`/api/sonos/control?groupId=${currentGroup.id}&command=${command}`, { method: \"POST\" });\n    refreshState();\n  };\n\n  const skip = async (direction: \"skipToNextTrack\" | \"skipToPreviousTrack\") => {\n    await fetch(`/api/sonos/control?groupId=${currentGroup.id}&command=${direction}`, { method: \"POST\" });\n    refreshState();\n  };\n\n  const handleVolumeChange = (value: number[]) => {\n    setVolume(value[0]);\n  };\n\n  const handleSeek = async (value: number[]) => {\n    if (!currentGroup || durationMillis === 0) return;\n    const seekPercent = value[0] / 100;\n    const seekPosition = Math.floor(durationMillis * seekPercent);\n    setCurrentPosition(seekPosition);\n    \n    // Send seek command to Sonos\n    try {\n      await fetch(`/api/sonos/seek?groupId=${currentGroup.id}&positionMillis=${seekPosition}`, { method: \"POST\" });\n      refreshState();\n    } catch (error) {\n      console.error(\"Seek failed:\", error);\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 1.05 }}\n      animate={{ opacity: 1, scale: 1 }}\n      exit={{ opacity: 0, scale: 0.98 }}\n      transition={{ duration: 0.6, ease: [0.22, 1, 0.36, 1] }}\n      className=\"fixed inset-0 z-[200] bg-background flex flex-col p-6 sm:p-10 md:p-12 overflow-hidden select-none\"\n    >\n      {/* Immersive Dynamic Background */}\n      <div className=\"absolute inset-0 z-[-1] overflow-hidden pointer-events-none\">\n        {artwork ? (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 0.5 }}\n            transition={{ duration: 1.5 }}\n            className=\"relative h-full w-full\"\n          >\n            <img \n              src={artwork} \n              alt=\"Background\" \n              className=\"w-full h-full object-cover blur-[120px] saturate-[1.5] brightness-[0.3] scale-110\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-background\" />\n          </motion.div>\n        ) : (\n          <div className=\"h-full w-full bg-secondary/10\" />\n        )}\n      </div>\n\n      {/* Header - Fixed Height */}\n      <header className=\"w-full max-w-7xl mx-auto flex items-center justify-between z-10 shrink-0 h-20 sm:h-24\">\n        <Button \n          variant=\"ghost\" \n          size=\"icon\" \n          onClick={handleClose}\n          className=\"h-12 w-12 sm:h-14 sm:w-14 rounded-2xl glass hover:bg-white/10 transition-all duration-500 group\"\n        >\n          <ChevronDown className=\"h-8 w-8 group-hover:translate-y-1 transition-transform\" />\n        </Button>\n        \n        <div className=\"text-center\">\n          <p className=\"text-[10px] font-black uppercase tracking-[0.5em] text-primary mb-1 opacity-50\">Atmosphere</p>\n          <h2 className=\"text-lg sm:text-xl font-black italic uppercase tracking-tighter leading-none truncate max-w-[200px] sm:max-w-md\">\n            {currentGroup?.name}\n          </h2>\n        </div>\n\n        <Button \n          variant=\"ghost\" \n          size=\"icon\" \n          className=\"h-12 w-12 sm:h-14 sm:w-14 rounded-2xl glass hover:bg-white/10 transition-all duration-500\"\n        >\n          <ListMusic className=\"h-6 w-6\" />\n        </Button>\n      </header>\n\n      {/* Main Experience - Flex Growing Area */}\n      <main className=\"w-full max-w-7xl mx-auto flex-1 min-h-0 flex flex-col lg:flex-row items-center justify-center gap-8 md:gap-12 lg:gap-20 z-10 py-4 sm:py-8 overflow-y-auto no-scrollbar\">\n        {/* Artwork - Constrained by height */}\n        <div className=\"flex-1 flex items-center justify-center w-full min-h-0 max-h-[40vh] lg:max-h-[60vh]\">\n          <motion.div \n            layoutId=\"artwork\"\n            className=\"relative aspect-square h-full max-w-full rounded-[2.5rem] lg:rounded-[4rem] overflow-hidden shadow-[0_40px_100px_-20px_rgba(0,0,0,0.5)] border border-white/5 bg-secondary/20\"\n          >\n            {artwork ? (\n              <img src={artwork} alt={title} className=\"w-full h-full object-cover\" />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center italic\">\n                <span className=\"text-foreground/5 text-9xl font-black\">S</span>\n              </div>\n            )}\n          </motion.div>\n        </div>\n\n        {/* Info & Controls - Flex shrinkable */}\n        <div className=\"flex-1 flex flex-col justify-center w-full max-w-2xl text-center lg:text-left space-y-8 sm:space-y-12 shrink-0\">\n          <div className=\"space-y-4\">\n            <motion.div\n              initial={{ x: -20, opacity: 0 }}\n              animate={{ x: 0, opacity: 1 }}\n              transition={{ delay: 0.3 }}\n              className=\"space-y-2 sm:space-y-4\"\n            >\n              <h1 className=\"text-4xl sm:text-5xl md:text-6xl xl:text-7xl 2xl:text-8xl font-black tracking-tighter italic uppercase leading-[0.9] text-balance\">{title}</h1>\n              <div className=\"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-8\">\n                <p className=\"text-xl sm:text-2xl font-bold text-foreground/40 tracking-tight uppercase italic truncate\">{artist}</p>\n                <div className=\"hidden lg:block h-px w-12 bg-primary/20\" />\n                <div className=\"flex items-center justify-center gap-4\">\n                  <span className=\"text-[9px] font-black uppercase tracking-[0.3em] px-3 py-1 glass rounded-full text-primary border-primary/20\">Ultra HD</span>\n                  <Heart className=\"h-6 w-6 text-foreground/20 hover:text-red-500 transition-colors cursor-pointer\" />\n                </div>\n              </div>\n            </motion.div>\n          </div>\n\n          <div className=\"space-y-8 sm:space-y-12\">\n            {/* Progress */}\n            <div className=\"space-y-4 sm:space-y-6\">\n              <Slider \n                value={[progress]} \n                onValueChange={handleSeek}\n                max={100} \n                step={0.1} \n                className=\"w-full h-1.5 sm:h-2 cursor-pointer\" \n              />\n              <div className=\"flex justify-between text-[10px] font-black tracking-[0.3em] text-foreground/20 uppercase\">\n                <span>{formatTime(currentPosition)}</span>\n                <span>{formatTime(durationMillis)}</span>\n              </div>\n            </div>\n\n            {/* Controls */}\n            <div className=\"flex items-center justify-between lg:justify-start lg:gap-12\">\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-10 w-10 text-foreground/20 hover:text-primary transition-all\">\n                <Shuffle className=\"h-6 w-6\" />\n              </Button>\n              \n              <div className=\"flex items-center gap-8 sm:gap-12\">\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\" \n                  className=\"h-14 w-14 text-foreground/40 hover:text-foreground transition-all hover:scale-110 active:scale-95\"\n                  onClick={() => skip(\"skipToPreviousTrack\")}\n                >\n                  <SkipBack className=\"h-10 w-10 fill-current\" />\n                </Button>\n                \n                <Button \n                  variant=\"default\" \n                  size=\"icon\" \n                  className=\"h-24 w-24 sm:h-32 sm:w-32 rounded-[2.5rem] sm:rounded-[3.5rem] bg-foreground text-background hover:scale-105 active:scale-90 transition-all shadow-2xl border-4 border-white/5 shrink-0\" \n                  onClick={togglePlayback}\n                >\n                  {isPlaying ? <Pause className=\"h-10 w-10 sm:h-14 sm:w-14 fill-current\" /> : <Play className=\"h-10 w-10 sm:h-14 sm:w-14 fill-current ml-1.5\" />}\n                </Button>\n                \n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\" \n                  className=\"h-14 w-14 text-foreground/40 hover:text-foreground transition-all hover:scale-110 active:scale-95\"\n                  onClick={() => skip(\"skipToNextTrack\")}\n                >\n                  <SkipForward className=\"h-10 w-10 fill-current\" />\n                </Button>\n              </div>\n\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-10 w-10 text-foreground/20 hover:text-primary transition-all\">\n                <Repeat className=\"h-6 w-6\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Footer - Fixed Height */}\n      <footer className=\"w-full max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-6 sm:gap-10 z-10 pt-6 sm:pt-10 border-t border-white/5 shrink-0 h-32 sm:h-24 mb-4 sm:mb-0\">\n        <div className=\"flex items-center gap-6 w-full sm:w-[300px] px-6 py-3 glass rounded-2xl\">\n          <Volume2 className=\"h-5 w-5 text-primary shrink-0\" />\n          <Slider value={[volume]} onValueChange={handleVolumeChange} max={100} step={1} className=\"flex-1 h-1\" />\n        </div>\n        \n        <div className=\"flex items-center gap-8 lg:gap-12\">\n          <button className=\"text-[10px] font-black uppercase tracking-[0.4em] text-foreground/20 hover:text-primary transition-colors\">Lyrics</button>\n          <button className=\"text-[10px] font-black uppercase tracking-[0.4em] text-foreground/20 hover:text-primary transition-colors\">Queue</button>\n          <div className=\"flex items-center gap-3\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"h-12 w-12 rounded-2xl glass text-foreground/20 hover:text-primary transition-all\">\n              <Share2 className=\"h-5 w-5\" />\n            </Button>\n          </div>\n        </div>\n      </footer>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3266, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/player/mini-player.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Play, Pause, SkipBack, SkipForward, Volume2, Maximize2, Heart, Share2, Disc } from \"lucide-react\";\nimport { FullScreenPlayer } from \"./full-screen-player\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport function MiniPlayer() {\n  const { currentGroup, playbackState, volume, setVolume, refreshState, isExpanded, setIsExpanded } = useSonos();\n\n  if (!currentGroup) return null;\n\n  const track = playbackState?.currentItem?.track;\n  const container = playbackState?.container;\n  const metadata = track || container || playbackState?.currentItem;\n  const isPlaying = playbackState?.playbackState === \"PLAYBACK_STATE_PLAYING\";\n  \n  const artwork = track?.imageUrl || container?.imageUrl || metadata?.imageUrl;\n  const title = track?.name || container?.name || metadata?.name || \"No Music Playing\";\n  \n  // Extract artist - Sonos API structure: currentItem.track.artist.name\n  const artist = \n    track?.artist?.name || \n    track?.podcast?.name || \n    container?.name || \n    \"Unknown Artist\";\n\n  const togglePlayback = async (e: React.MouseEvent) => {\n    e.stopPropagation();\n    const command = isPlaying ? \"pause\" : \"play\";\n    await fetch(`/api/sonos/control?groupId=${currentGroup.id}&command=${command}`, { method: \"POST\" });\n    refreshState();\n  };\n\n  const skip = async (e: React.MouseEvent, direction: \"skipToNextTrack\" | \"skipToPreviousTrack\") => {\n    e.stopPropagation();\n    await fetch(`/api/sonos/control?groupId=${currentGroup.id}&command=${direction}`, { method: \"POST\" });\n    refreshState();\n  };\n\n  const handleVolumeChange = (value: number[]) => {\n    setVolume(value[0]);\n  };\n\n  return (\n    <>\n      <motion.div \n        initial={{ y: 40, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ delay: 0.8, duration: 1, ease: [0.22, 1, 0.36, 1] }}\n        onClick={() => setIsExpanded(true)}\n        className=\"h-28 glass-light rounded-[3rem] p-4 shadow-[0_40px_80px_-20px_rgba(0,0,0,0.4)] flex items-center justify-between gap-8 border border-white/10 group cursor-pointer hover:bg-white/10 dark:hover:bg-black/40 transition-all duration-700\"\n      >\n        {/* Track Info */}\n        <div className=\"flex items-center gap-6 w-[35%] min-w-0\">\n          <div className=\"h-20 w-20 rounded-[2rem] overflow-hidden flex-shrink-0 shadow-2xl relative group-hover:scale-105 transition-transform duration-700 border border-white/5 bg-secondary\">\n            {artwork ? (\n              <img src={artwork} alt={title} className=\"w-full h-full object-cover saturate-125\" />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <Disc className=\"h-8 w-8 text-muted-foreground opacity-20 animate-spin-slow\" />\n              </div>\n            )}\n            {isPlaying && (\n              <div className=\"absolute inset-0 bg-black/20 backdrop-blur-[2px] flex items-center justify-center\">\n                <div className=\"flex gap-1.5 items-end h-6\">\n                  <motion.div animate={{ height: [4, 16, 8, 20, 4] }} transition={{ repeat: Infinity, duration: 1 }} className=\"w-1 bg-white rounded-full\" />\n                  <motion.div animate={{ height: [8, 4, 16, 4, 12] }} transition={{ repeat: Infinity, duration: 0.8 }} className=\"w-1 bg-white rounded-full\" />\n                  <motion.div animate={{ height: [12, 16, 4, 16, 8] }} transition={{ repeat: Infinity, duration: 1.2 }} className=\"w-1 bg-white rounded-full\" />\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"flex flex-col min-w-0\">\n            <span className=\"font-black text-[22px] tracking-tighter truncate uppercase italic leading-none mb-1.5\">{title}</span>\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-primary opacity-80\">Artist</span>\n              <span className=\"text-[13px] font-bold text-muted-foreground truncate uppercase tracking-widest opacity-50\">{artist}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Playback Controls */}\n        <div className=\"flex items-center gap-10\">\n          <Button \n            variant=\"ghost\" \n            size=\"icon\" \n            className=\"h-14 w-14 text-muted-foreground hover:text-foreground transition-all group/btn\"\n            onClick={(e) => skip(e, \"skipToPreviousTrack\")}\n          >\n            <SkipBack className=\"h-8 w-8 fill-current transition-transform group-active/btn:scale-90\" />\n          </Button>\n          \n          <Button \n            variant=\"default\" \n            size=\"icon\" \n            className=\"h-20 w-20 rounded-[2rem] bg-foreground text-background hover:scale-105 active:scale-90 transition-all shadow-[0_20px_40px_-8px_rgba(0,0,0,0.3)] dark:shadow-primary/20 border-4 border-white/5\" \n            onClick={togglePlayback}\n          >\n            {isPlaying ? <Pause className=\"h-10 w-10 fill-current\" /> : <Play className=\"h-10 w-10 fill-current ml-1.5\" />}\n          </Button>\n          \n          <Button \n            variant=\"ghost\" \n            size=\"icon\" \n            className=\"h-14 w-14 text-muted-foreground hover:text-foreground transition-all group/btn\"\n            onClick={(e) => skip(e, \"skipToNextTrack\")}\n          >\n            <SkipForward className=\"h-8 w-8 fill-current transition-transform group-active/btn:scale-90\" />\n          </Button>\n        </div>\n\n        {/* High-End Actions */}\n        <div className=\"flex items-center justify-end gap-8 w-[35%]\">\n          <div className=\"hidden xl:flex items-center gap-6 px-6 py-4 bg-foreground/5 rounded-[2rem] border border-white/5 min-w-[240px]\" onClick={(e) => e.stopPropagation()}>\n            <Volume2 className=\"h-5 w-5 text-muted-foreground shrink-0\" />\n            <Slider value={[volume]} onValueChange={handleVolumeChange} max={100} step={1} className=\"flex-1 h-1\" />\n          </div>\n          \n          <div className=\"flex items-center gap-3 pr-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              className=\"h-14 w-14 rounded-[1.75rem] glass hover:bg-primary/10 transition-all group/heart\"\n            >\n              <Heart className=\"h-6 w-6 text-muted-foreground group-hover/heart:text-red-500 transition-colors\" />\n            </Button>\n            <Button \n              variant=\"secondary\" \n              size=\"icon\" \n              className=\"h-14 w-14 rounded-[1.75rem] bg-primary text-primary-foreground hover:scale-105 transition-all shadow-lg\"\n              onClick={(e) => { e.stopPropagation(); setIsExpanded(true); }}\n            >\n              <Maximize2 className=\"h-6 w-6\" />\n            </Button>\n          </div>\n        </div>\n      </motion.div>\n\n      <AnimatePresence>\n        {isExpanded && (\n          <FullScreenPlayer onClose={() => setIsExpanded(false)} />\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3693, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/dashboard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSonos } from \"@/components/sonos-provider\";\nimport { ZoneSelector } from \"./dashboard/zone-selector\";\nimport { FavoriteGrid } from \"./dashboard/favorite-grid\";\nimport { LibraryPage } from \"./dashboard/library-page\";\nimport { SettingsPage } from \"./dashboard/settings-page\";\nimport { MiniPlayer } from \"./player/mini-player\";\nimport { Search, Bell, Settings, Moon, Sun, Menu, X, Command } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\n\nexport function Dashboard() {\n  const { currentGroup, isExpanded, currentPage, setCurrentPage } = useSonos();\n  const [isDarkMode, setIsDarkMode] = useState(true);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n\n  useEffect(() => {\n    if (isDarkMode) {\n      document.documentElement.classList.add(\"dark\");\n    } else {\n      document.documentElement.classList.remove(\"dark\");\n    }\n  }, [isDarkMode]);\n\n  return (\n    <div className=\"flex h-screen bg-background text-foreground transition-colors duration-1000 overflow-hidden font-sans\">\n      {/* Subtle Background Textures */}\n      <div className=\"fixed inset-0 z-0 pointer-events-none overflow-hidden\">\n        <div className=\"absolute top-[-10%] left-[-5%] w-[50%] h-[50%] bg-primary/5 blur-[150px] rounded-full\" />\n        <div className=\"absolute bottom-[-10%] right-[-5%] w-[40%] h-[40%] bg-foreground/3 blur-[120px] rounded-full\" />\n      </div>\n\n      <AnimatePresence>\n        {isSidebarOpen && !isExpanded && (\n          <motion.aside\n            initial={{ x: -320, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: -320, opacity: 0 }}\n            transition={{ type: \"spring\", damping: 35, stiffness: 250 }}\n            className=\"fixed lg:relative z-50 h-full w-[300px] flex flex-col border-r border-foreground/[0.03]\"\n          >\n            {/* Minimalist Logo */}\n            <div className=\"p-10 pb-6 shrink-0\">\n              <div className=\"flex items-center gap-3 group cursor-pointer\">\n                <div className=\"h-10 w-10 rounded-full bg-foreground flex items-center justify-center transition-all duration-500 group-hover:scale-110 shadow-lg\">\n                  <Command className=\"text-background h-5 w-5\" />\n                </div>\n                <span className=\"text-lg font-black tracking-[0.2em] uppercase italic opacity-90 leading-none\">Stream</span>\n              </div>\n            </div>\n\n            {/* Navigation & Rooms */}\n            <div className=\"flex-1 overflow-y-auto no-scrollbar py-6\">\n              <ZoneSelector isCollapsed={false} />\n            </div>\n\n            {/* Simple Controls Footer */}\n            <div className=\"p-10 shrink-0 space-y-6\">\n              <button \n                onClick={() => setIsDarkMode(!isDarkMode)}\n                className=\"w-full h-12 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-between px-6 transition-all duration-300 group\"\n              >\n                <span className=\"text-[10px] font-black uppercase tracking-[0.3em] opacity-40 group-hover:opacity-100 transition-opacity\">\n                  {isDarkMode ? \"Night\" : \"Day\"}\n                </span>\n                <div className=\"relative h-4 w-4\">\n                  <Sun className={cn(\"absolute inset-0 h-4 w-4 transition-all duration-700\", isDarkMode ? \"scale-0 rotate-90\" : \"scale-100 rotate-0 text-amber-500\")} />\n                  <Moon className={cn(\"absolute inset-0 h-4 w-4 transition-all duration-700\", isDarkMode ? \"scale-100 rotate-0 text-foreground\" : \"scale-0 -rotate-90\")} />\n                </div>\n              </button>\n              \n              <div className=\"flex justify-center\">\n                <p className=\"text-[8px] font-black uppercase tracking-[0.5em] opacity-20 italic\">V 1.0 Architectural</p>\n              </div>\n            </div>\n          </motion.aside>\n        )}\n      </AnimatePresence>\n\n      <main className=\"flex-1 flex flex-col h-full relative z-10 overflow-hidden\">\n        {/* Editorial Header */}\n        {!isExpanded && (\n          <header className=\"h-32 px-12 lg:px-20 flex items-center justify-between shrink-0\">\n            <div className=\"flex items-center gap-10\">\n              <button \n                onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n                className=\"h-10 w-10 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-center transition-all group relative overflow-hidden\"\n              >\n                <Menu className={cn(\"h-4 w-4 transition-transform duration-500\", isSidebarOpen ? \"translate-y-10 scale-0\" : \"translate-y-0 scale-100\")} />\n                <X className={cn(\"absolute h-4 w-4 transition-transform duration-500\", isSidebarOpen ? \"translate-y-0 scale-100\" : \"-translate-y-10 scale-0\")} />\n              </button>\n              \n              <AnimatePresence mode=\"wait\">\n                <motion.div\n                  key={currentGroup?.id || \"empty\"}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"space-y-0.5\"\n                >\n                  <p className=\"text-[9px] font-black uppercase tracking-[0.6em] text-primary opacity-40\">Environment</p>\n                  <h2 className=\"text-4xl lg:text-5xl font-black tracking-tighter italic uppercase leading-none opacity-90\">\n                    {currentGroup?.name || \"Lobby\"}\n                  </h2>\n                </motion.div>\n              </AnimatePresence>\n            </div>\n\n            <div className=\"hidden md:flex items-center gap-8\">\n              <div className=\"flex items-center bg-foreground/[0.03] rounded-full px-6 h-12 w-72 border border-foreground/[0.05] focus-within:border-foreground/20 transition-all\">\n                <Search className=\"h-4 w-4 text-muted-foreground mr-4 opacity-40\" />\n                <input \n                  type=\"text\" \n                  placeholder=\"Search...\" \n                  className=\"bg-transparent border-none outline-none text-xs w-full font-bold placeholder:text-muted-foreground/30 uppercase tracking-widest\"\n                />\n              </div>\n              <div className=\"flex gap-4\">\n                <button className=\"h-10 w-10 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-center transition-all opacity-40 hover:opacity-100\">\n                  <Bell className=\"h-4 w-4\" />\n                </button>\n                <button \n                  onClick={() => setCurrentPage(\"Settings\")}\n                  className={cn(\n                    \"h-10 w-10 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-center transition-all\",\n                    currentPage === \"Settings\" ? \"opacity-100 bg-foreground/[0.05]\" : \"opacity-40 hover:opacity-100\"\n                  )}\n                >\n                  <Settings className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n          </header>\n        )}\n\n        {/* Cinematic Gallery Grid */}\n        <section className={cn(\n          \"flex-1 overflow-y-auto no-scrollbar pt-4 pb-48\",\n          !isExpanded ? \"px-12 lg:px-20\" : \"px-0\"\n        )}>\n          {!isExpanded && (\n            <>\n              {currentPage === \"Feed\" && <FavoriteGrid />}\n              {currentPage === \"Library\" && <LibraryPage />}\n              {currentPage === \"Settings\" && <SettingsPage />}\n              {currentPage === \"Broadcast\" && (\n                <div className=\"flex items-center justify-center h-full\">\n                  <p className=\"text-muted-foreground uppercase tracking-widest\">Broadcast Coming Soon</p>\n                </div>\n              )}\n              {currentPage === \"Curated\" && (\n                <div className=\"flex items-center justify-center h-full\">\n                  <p className=\"text-muted-foreground uppercase tracking-widest\">Curated Coming Soon</p>\n                </div>\n              )}\n            </>\n          )}\n        </section>\n\n        {/* Floating Controller Hub */}\n        <div className=\"absolute bottom-12 left-0 right-0 px-12 lg:px-20 pointer-events-none\">\n          <div className=\"max-w-6xl mx-auto pointer-events-auto\">\n            <MiniPlayer />\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4184, "column": 0}, "map": {"version":3,"sources":["file:///Users/ollie/Documents/dev/musicStreamer/src/components/spotify-callback-handler.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { useSonos } from \"@/components/sonos-provider\";\n\nexport function SpotifyCallbackHandler() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const { setCurrentPage } = useSonos();\n\n  useEffect(() => {\n    const spotifyConnected = searchParams.get(\"spotify_connected\");\n    const error = searchParams.get(\"error\");\n\n    if (spotifyConnected === \"true\") {\n      // Redirect to Settings page after successful connection\n      setCurrentPage(\"Settings\");\n      // Remove query params from URL\n      router.replace(\"/\");\n    } else if (error) {\n      // Show error, redirect to Settings\n      setCurrentPage(\"Settings\");\n      router.replace(\"/\");\n    }\n  }, [searchParams, router, setCurrentPage]);\n\n  return null;\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,sJAAQ;IAEnC,IAAA,0KAAS;4CAAC;YACR,MAAM,mBAAmB,aAAa,GAAG,CAAC;YAC1C,MAAM,QAAQ,aAAa,GAAG,CAAC;YAE/B,IAAI,qBAAqB,QAAQ;gBAC/B,wDAAwD;gBACxD,eAAe;gBACf,+BAA+B;gBAC/B,OAAO,OAAO,CAAC;YACjB,OAAO,IAAI,OAAO;gBAChB,mCAAmC;gBACnC,eAAe;gBACf,OAAO,OAAO,CAAC;YACjB;QACF;2CAAG;QAAC;QAAc;QAAQ;KAAe;IAEzC,OAAO;AACT;GAtBgB;;QACO,wJAAe;QACrB,kJAAS;QACG,sJAAQ;;;KAHrB"}}]
}