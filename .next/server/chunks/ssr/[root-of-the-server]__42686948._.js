module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},43285,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/dynamic-access-async-storage.external.js",()=>require("next/dist/server/app-render/dynamic-access-async-storage.external.js"))},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e({error:a}){if(d){let b=d.getStore();if(b?.isStaticGeneration)throw a&&console.error(a),a}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(51234),f={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},g={fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"},h=function({error:a}){let b=a?.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:a}),(0,d.jsx)("div",{style:f,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:g,children:["Application error: a ",b?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",b?"server logs":"browser console"," for more information)."]}),b?(0,d.jsx)("p",{style:g,children:`Digest: ${b}`}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},61128,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(void 0);function e(a,b){if(a===b)return!0;if(null==a||null==b||"object"!=typeof a||"object"!=typeof b)return!1;let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let f of c)if(!d.includes(f)||!e(a[f],b[f]))return!1;return!0}function f({children:a}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(50),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)("Feed"),[v,w]=(0,c.useState)([]),x=(0,c.useRef)(!1),y=(0,c.useRef)(null),z=(0,c.useRef)(null),A=(0,c.useRef)({households:[],groups:[],favorites:[],playbackState:null,volume:50});(0,c.useEffect)(()=>{z.current=l},[l]);let B=(0,c.useCallback)(async a=>{try{await fetch("/api/preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"currentZoneId",value:a})})}catch(a){console.error("Failed to save zone preference:",a)}},[]),C=(0,c.useCallback)(async a=>{try{await fetch("/api/preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"selectedZoneIds",value:JSON.stringify(a)})})}catch(a){console.error("Failed to save selected zones preference:",a)}},[]),D=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/preferences?key=currentZoneId");if(a.ok)return(await a.json()).value}catch(a){console.error("Failed to load zone preference:",a)}return null},[]),E=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/preferences?key=selectedZoneIds");if(a.ok){let b=await a.json();if(b.value)return JSON.parse(b.value)}}catch(a){console.error("Failed to load selected zones preference:",a)}return[]},[]),F=(0,c.useCallback)(async()=>{if(!x.current){x.current=!0;try{let a=await fetch("/api/sonos/state");if(!a.ok)return;let b=await a.json();e(A.current.households,b.households||[])||(g(b.households||[]),A.current.households=b.households||[]);let c=(b.groups||[]).sort((a,b)=>a.name.localeCompare(b.name));e(A.current.groups,c)||(i(c),A.current.groups=c);let d=(b.favorites||[]).sort((a,b)=>a.name.localeCompare(b.name));e(A.current.favorites,d)||(k(d),A.current.favorites=d);let f=z.current;if(!f&&b.groups?.length>0){let a=await D(),c=await E(),d=null;if(c.length>0){let a=c.filter(a=>b.groups.some(b=>b.id===a));a.length>0&&(w(a),d=b.groups.find(b=>b.id===a[0]))}!d&&a&&(d=b.groups.find(b=>b.id===a));let e=d||b.groups[0];m(e),0===c.length&&w([e.id])}else if(f){let a=b.groups.find(a=>a.id===f.id);if(a&&!e(f,a))m(a),v.includes(a.id)||w([a.id]);else if(!a){let a=await D(),c=null;a&&(c=b.groups.find(b=>b.id===a));let d=c||b.groups[0];d&&(m(d),w([d.id]))}}let h=f?.id;if(h){h!==y.current&&(y.current=h);let[a,b]=await Promise.all([fetch(`/api/sonos/playback?groupId=${h}`),fetch(`/api/sonos/volume?groupId=${h}`)]);if(410===a.status||410===b.status){let a=await fetch("/api/sonos/state");if(a.ok){let b=((await a.json()).groups||[]).sort((a,b)=>a.name.localeCompare(b.name));i(b);let c=f?.name,d=c?b.find(a=>a.name===c):b[0];d?(m(d),v.includes(f.id)&&w([d.id])):b.length>0&&(m(b[0]),w([b[0].id]))}return}if(a.ok){let b=await a.json();o(b),A.current.playbackState=b}if(b.ok){let a=(await b.json()).volume||50;q(a),A.current.volume=a}}}catch(a){console.error("Failed to fetch Sonos state",a)}finally{x.current=!1}}},[D,E]),G=async a=>{l&&(q(a),410===(await fetch(`/api/sonos/control?groupId=${l.id}&volume=${a}`,{method:"POST"})).status&&await F())};return(0,c.useEffect)(()=>{F()},[]),(0,c.useEffect)(()=>{let a=setInterval(()=>{F()},1e4);return()=>clearInterval(a)},[]),(0,c.useEffect)(()=>{l?.id&&F()},[l?.id]),(0,c.useEffect)(()=>{l?.id&&(0!==v.length&&v.includes(l.id)||w([l.id]),B(l.id))},[l?.id,B]),(0,c.useEffect)(()=>{v.length>0&&C(v)},[v,C]),(0,b.jsx)(d.Provider,{value:{households:f,groups:h,favorites:j,currentGroup:l,playbackState:n,volume:p,isExpanded:r,currentPage:t,selectedZoneIds:v,setIsExpanded:s,setCurrentPage:u,setCurrentGroup:m,setVolume:G,setSelectedZoneIds:w,toggleZone:a=>{w(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},refreshState:F},children:a})}function g(){let a=(0,c.useContext)(d);if(void 0===a)throw Error("useSonos must be used within a SonosProvider");return a}a.s(["SonosProvider",()=>f,"useSonos",()=>g])},31253,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(void 0),e={theWall:{name:"TheWall",screenSize:'10.1"',resolution:"1280×800",orientation:"landscape"},theDesk:{name:"TheDesk",screenSize:'10.1"',resolution:"1280×800",orientation:"landscape"}};function f({children:a}){let[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/preferences?key=deviceType");if(a.ok){let b=await a.json();b.value&&("theWall"===b.value||"theDesk"===b.value)&&g(b.value)}}catch(a){console.error("Failed to load device preference:",a)}finally{i(!1)}})()},[]);let j=f?e[f]:null;return(0,c.useEffect)(()=>{f?document.documentElement.setAttribute("data-device",f):document.documentElement.removeAttribute("data-device")},[f]),(0,b.jsx)(d.Provider,{value:{deviceType:f,isLoading:h,deviceConfig:j,deviceClass:a=>f?"string"==typeof a?a:a[f]||a.default||"":"string"==typeof a?a:""},children:a})}function g(){let a=(0,c.useContext)(d);if(void 0===a)throw Error("useDevice must be used within a DeviceProvider");return a}a.s(["DeviceProvider",()=>f,"useDevice",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42686948._.js.map