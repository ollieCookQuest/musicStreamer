module.exports=[75195,a=>{"use strict";var b=a.i(87924),c=a.i(61128),d=a.i(31253),e=a.i(99570),f=a.i(70106);let g=(0,f.default)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h=(0,f.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var i=a.i(11729),j=a.i(33441);let k=(0,f.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var l=a.i(68114),m=a.i(46271),n=a.i(72131);let o=[{icon:g,label:"Feed",page:"Feed"},{icon:h,label:"Library",page:"Library"}];function p({isCollapsed:a}){let{groups:d,currentGroup:f,setCurrentGroup:g,currentPage:h,setCurrentPage:p,selectedZoneIds:q,toggleZone:r,setSelectedZoneIds:s,refreshState:t}=(0,c.useSonos)(),[u,v]=(0,n.useState)(!1),w=async()=>{if(!(q.length<2))try{console.log("Selected zone IDs:",q),console.log("Groups:",d);let a=[];for(let b of q){let c=d.find(a=>a.id===b);if(console.log(`Processing zone ${b}:`,c),c){if(c.players&&Array.isArray(c.players)&&c.players.forEach(b=>{let c=b.id||b.playerId||b.player?.id;console.log("Found player in group.players:",b,`ID: ${c}`),c&&!a.includes(c)&&a.push(c)}),c.playerIds&&Array.isArray(c.playerIds)&&c.playerIds.forEach(b=>{console.log(`Found playerId in group.playerIds: ${b}`),b&&!a.includes(b)&&a.push(b)}),c.id&&c.id.includes(":")){let b=c.id.split(":")[0];console.log(`Extracted player ID from group ID: ${b}`),b&&!a.includes(b)&&a.push(b)}c.coordinatorId&&!a.includes(c.coordinatorId)&&(console.log(`Found coordinatorId: ${c.coordinatorId}`),a.push(c.coordinatorId))}}if(0===a.length)return void console.error("No player IDs found for selected zones");let b=q[0];console.log("Grouping zones from sidebar:",{targetGroupId:b,playerIds:a});let c=await fetch("/api/sonos/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:b,playerIds:a})});if(!c.ok){let a=await c.json().catch(()=>({error:"Failed to parse error response"}));console.error("Group API error:",{status:c.status,statusText:c.statusText,error:a}),alert(`Failed to group zones: ${a.error||a.details||"Unknown error"}`);return}await t(),await new Promise(a=>setTimeout(a,1e3)),await t();let e=(await fetch("/api/sonos/state").then(a=>a.json()).then(a=>a.groups||[])).find(a=>a.id===b);e&&(g(e),s([b]),v(!1))}catch(a){console.error("Failed to group zones:",a)}};return(0,b.jsxs)("div",{className:"flex flex-col h-full space-y-10 py-2",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-muted-foreground px-6",children:"System"}),(0,b.jsx)("nav",{className:"space-y-1 px-2",children:o.map(a=>{let c=h===a.page;return(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>p(a.page),className:(0,l.cn)("w-full h-12 rounded-2xl transition-all duration-300 flex items-center justify-start px-4 group relative",c?"bg-foreground/[0.05] text-foreground shadow-sm":"text-muted-foreground hover:bg-foreground/[0.03] hover:text-foreground"),children:[(0,b.jsx)(a.icon,{className:(0,l.cn)("h-4 w-4 shrink-0 transition-transform duration-500",c?"scale-110":"group-hover:scale-110")}),(0,b.jsx)("span",{className:"font-black tracking-tight text-[11px] uppercase italic ml-4",children:a.label})]},a.label)})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6",children:[(0,b.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-muted-foreground",children:"Zones"}),u?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[q.length>1&&(0,b.jsxs)("button",{onClick:w,className:"text-[8px] font-black uppercase tracking-[0.2em] text-primary hover:text-foreground transition-colors flex items-center gap-1",children:[(0,b.jsx)(k,{className:"h-3 w-3"}),"Group"]}),(0,b.jsx)("button",{onClick:()=>{v(!1),s([])},className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground transition-colors",children:"Done"})]}):(0,b.jsx)("button",{onClick:()=>v(!0),className:"text-[8px] font-black uppercase tracking-[0.2em] text-primary hover:text-foreground transition-colors",children:"Select"})]}),(0,b.jsx)("div",{className:"space-y-2 px-2",children:d.map(a=>{let c="PLAYBACK_STATE_PLAYING"===a.playbackState,d=f?.id===a.id,e=q.includes(a.id);return(0,b.jsxs)(m.motion.button,{onClick:b=>{u?(b.stopPropagation(),r(a.id)):(g(a),s([a.id]))},className:(0,l.cn)("w-full h-20 rounded-[2rem] transition-all duration-500 relative flex items-center px-4 overflow-hidden border",d&&!u?"bg-foreground/[0.06] text-foreground border-foreground/[0.1]":e&&u?"bg-primary/10 text-foreground border-primary/30":"bg-transparent text-muted-foreground hover:bg-foreground/[0.02] border-transparent"),whileHover:{scale:1.01},whileTap:{scale:.99},children:[d&&!u&&(0,b.jsx)(m.motion.div,{layoutId:"active-zone-indicator",className:"absolute left-0 top-0 bottom-0 w-0.5 bg-foreground"}),e&&u&&(0,b.jsx)(m.motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2 h-6 w-6 rounded-full bg-primary flex items-center justify-center shadow-md",children:(0,b.jsx)(j.Check,{className:"h-3.5 w-3.5 text-primary-foreground"})}),(0,b.jsxs)("div",{className:"relative shrink-0 flex items-center justify-center",children:[(0,b.jsx)("div",{className:(0,l.cn)("h-12 w-12 rounded-full flex items-center justify-center transition-all duration-500",d&&!u?"bg-foreground shadow-lg":e&&u?"bg-primary shadow-lg":"bg-foreground/[0.05]"),children:(0,b.jsx)(i.Waves,{className:(0,l.cn)("h-5 w-5 transition-colors duration-500",d&&!u||e&&u?"text-background":"text-muted-foreground")})}),c&&(0,b.jsx)(m.motion.div,{layoutId:`playing-dot-${a.id}`,className:"absolute -top-0.5 -right-0.5 h-2.5 w-2.5 rounded-full bg-primary border-2 border-background shadow-sm",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2}})]}),(0,b.jsxs)("div",{className:"flex flex-col items-start ml-4 flex-1 min-w-0",children:[(0,b.jsx)("span",{className:(0,l.cn)("font-black text-sm tracking-tight uppercase italic transition-colors leading-none truncate w-full",d&&!u||e&&u?"text-foreground":"text-muted-foreground opacity-60"),children:a.name}),(0,b.jsx)("div",{className:"mt-2 h-3 flex items-center",children:c?(0,b.jsxs)("div",{className:"flex gap-0.5 items-end h-full",children:[(0,b.jsx)(m.motion.div,{animate:{height:[3,10,5,12,3]},transition:{repeat:1/0,duration:1},className:"w-0.5 bg-primary rounded-full"}),(0,b.jsx)(m.motion.div,{animate:{height:[6,3,10,3,8]},transition:{repeat:1/0,duration:.8},className:"w-0.5 bg-primary rounded-full"}),(0,b.jsx)(m.motion.div,{animate:{height:[8,12,3,12,6]},transition:{repeat:1/0,duration:1.2},className:"w-0.5 bg-primary rounded-full"})]}):(0,b.jsx)("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted-foreground opacity-60 dark:opacity-40",children:"Standby"})})]})]},a.id)})})]})]})}let q=(0,f.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),r=(0,f.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),s=(0,f.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),t=(0,f.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function u(){let{favorites:a,currentGroup:d,groups:f,refreshState:g,households:h,setCurrentPage:i}=(0,c.useSonos)(),[j,k]=(0,n.useState)(null),[l,o]=(0,n.useState)([]),[p,u]=(0,n.useState)(!1),v=async a=>{let b=d||(f&&f.length>0?f[0]:null);if(!b)return void console.error("No active zone available to play favorite");try{let c=await fetch(`/api/sonos/control?groupId=${b.id}&favoriteId=${a}`,{method:"POST"});if(c.ok)await g();else{let a=await c.json();console.error("Failed to play favorite:",a)}}catch(a){console.error("Error playing favorite:",a)}},w=async a=>{if(d&&h?.[0]){u(!0),k(a);try{let b=a.itemId?.objectId||a.itemId,c=a.itemId?.serviceId||a.serviceId,d=a.itemId?.accountId||a.accountId;if(!b||!c||!d){console.error("Missing favorite item information:",a),await v(a.id),k(null),u(!1);return}let e=await fetch(`/api/sonos/library/metadata?accountId=${d}&itemId=${encodeURIComponent(b)}&serviceId=${c}`);if(e.ok){let a=await e.json();if(a.containers||a.items){let b=[...(a.containers||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||d}})),...(a.items||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||d}}))];o(b),u(!1);return}}let f=await fetch(`/api/sonos/library?accountId=${d}&containerId=${encodeURIComponent(b)}`);if(f.ok){let a=await f.json(),b=[...(a.containers||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||d}})),...(a.items||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||d}}))];o(b)}else await v(a.id),k(null)}catch(b){console.error("Failed to browse favorite:",b),await v(a.id),k(null)}finally{u(!1)}}},x=async a=>{if(!d)return;let b=a.id?.objectId||a.objectId,c=a.id?.serviceId||a.serviceId,e=a.id?.accountId||a.accountId;if(!b||!c||!e)return void console.error("Missing track information:",a);try{(await fetch("/api/sonos/library/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:d.id,itemId:b,serviceId:c,accountId:e,action:"replace"})})).ok&&await g()}catch(a){console.error("Failed to play track:",a)}};return a&&0!==a.length?(0,b.jsxs)("div",{className:"space-y-20",children:[(0,b.jsxs)("div",{className:"flex items-end justify-between border-b border-foreground/10 dark:border-white/5 pb-10",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.6em] text-primary",children:"Discovery"}),(0,b.jsx)("h2",{className:"text-6xl lg:text-7xl font-black tracking-tighter italic uppercase leading-none",children:"Your Library"})]}),(0,b.jsx)("button",{className:"h-16 w-16 rounded-[2rem] bg-secondary/50 hover:bg-secondary flex items-center justify-center transition-all group border border-foreground/10 dark:border-white/5",children:(0,b.jsx)(s,{className:"h-6 w-6 group-hover:translate-x-1 transition-transform"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-x-12 gap-y-20",children:a.map((a,c)=>(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.05*c,duration:1,ease:[.22,1,.36,1]},onClick:b=>{b.stopPropagation(),a.itemId||a.type?.includes("playlist")||a.type?.includes("container")?w(a):v(a.id)},className:"group cursor-pointer",children:[(0,b.jsxs)("div",{className:"relative aspect-[4/5] rounded-[3.5rem] lg:rounded-[4.5rem] overflow-hidden bg-secondary shadow-[0_40px_100px_-20px_rgba(0,0,0,0.3)] group-hover:shadow-[0_60px_120px_-30px_rgba(0,0,0,0.5)] transition-all duration-700 ease-[0.22,1,0.36,1]",children:[a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:a.name,className:"object-cover w-full h-full transition-all duration-1000 group-hover:scale-110 grayscale-[30%] group-hover:grayscale-0 saturate-[0.8] group-hover:saturate-100"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-secondary to-background flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-foreground/5 text-9xl font-black italic select-none",children:"ART"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-40 group-hover:opacity-60 transition-opacity duration-700"}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),v(a.id)},className:"absolute top-6 right-6 h-16 w-16 rounded-[2rem] bg-white dark:bg-foreground text-black dark:text-background flex items-center justify-center shadow-2xl hover:scale-110 transition-all duration-300 z-10","aria-label":"Play favorite",children:(0,b.jsx)(q,{className:"h-8 w-8 fill-current ml-1"})}),(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-end p-10 opacity-0 group-hover:opacity-100 transition-all duration-500 translate-y-4 group-hover:translate-y-0",children:[(0,b.jsx)("div",{className:`h-20 w-20 rounded-[2rem] bg-white/20 dark:bg-foreground/20 backdrop-blur-lg text-white flex items-center justify-center shadow-2xl mb-6 ${a.itemId||a.type?.includes("playlist")?"group-hover:scale-110 cursor-pointer":""}`,onClick:b=>{b.stopPropagation(),(a.itemId||a.type?.includes("playlist")||a.type?.includes("container"))&&w(a)},children:a.itemId||a.type?.includes("playlist")?(0,b.jsx)(t,{className:"h-8 w-8 fill-current"}):(0,b.jsx)(q,{className:"h-8 w-8 fill-current ml-1"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-white/80 dark:text-white/90",children:a.itemId||a.type?.includes("playlist")?"Browse Playlist":"Press to Play"}),(0,b.jsx)("p",{className:"text-white dark:text-white text-xl font-black italic uppercase leading-tight truncate",children:a.name})]})]})]}),(0,b.jsxs)("div",{className:"mt-10 px-6 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,b.jsx)("h3",{className:"font-black text-2xl lg:text-3xl tracking-tighter leading-none truncate uppercase italic group-hover:text-primary transition-colors duration-500",children:a.name}),(0,b.jsx)("p",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mt-2 opacity-70 dark:opacity-60 truncate",children:a.description||"Collection"})]}),(0,b.jsx)("button",{className:"h-10 w-10 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors shrink-0",children:(0,b.jsx)(r,{className:"h-5 w-5 text-muted-foreground opacity-50 dark:opacity-40"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,b.jsx)("div",{className:"h-px flex-1 bg-foreground/10 dark:bg-white/5 group-hover:bg-primary/30 dark:group-hover:bg-primary/20 transition-colors duration-700"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground opacity-60 dark:opacity-40",children:"Sonos Fav"})]})]})]},a.id))}),j&&(0,b.jsx)(m.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-xl flex items-center justify-center p-8",onClick:()=>{k(null),o([])},children:(0,b.jsxs)(m.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},onClick:a=>a.stopPropagation(),className:"max-w-4xl w-full max-h-[80vh] overflow-y-auto no-scrollbar bg-foreground/[0.02] rounded-3xl border border-foreground/[0.05] p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-4xl font-black uppercase italic tracking-tighter mb-2",children:j.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground uppercase tracking-widest",children:[l.length," ",1===l.length?"Track":"Tracks"]})]}),(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>{k(null),o([])},className:"h-12 w-12 rounded-full",children:(0,b.jsx)(s,{className:"h-6 w-6 rotate-180"})})]}),p?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(q,{className:"h-8 w-8 animate-pulse text-primary"})}):l.length>0?(0,b.jsx)("div",{className:"space-y-2",children:l.map((a,c)=>{let d=a.name||a.title||a.track?.name,e=a.artist?.name||a.track?.artists?.map(a=>a.name).join(", "),f=a.imageUrl||a.images?.[0]?.url||a.track?.album?.images?.[0]?.url;return a.type?.includes("container")||a._objectType,(0,b.jsxs)(m.motion.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*c},onClick:()=>{x(a)},className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-foreground/[0.03] hover:bg-foreground/[0.06] border border-foreground/[0.05] hover:border-foreground/20 transition-all group text-left",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-xl overflow-hidden flex-shrink-0 bg-secondary",children:f?(0,b.jsx)("img",{src:f,alt:d,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(q,{className:"h-6 w-6 text-muted-foreground opacity-30"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-black text-sm uppercase italic truncate",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest mt-1 truncate opacity-70",children:e})]}),(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(q,{className:"h-5 w-5 text-primary"})})]},a.id?.objectId||a.id||c)})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,b.jsx)(q,{className:"h-16 w-16 text-muted-foreground opacity-20 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground uppercase tracking-widest",children:"No tracks found"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"This playlist appears to be empty"})]})]})})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-10 animate-in fade-in zoom-in duration-1000",children:[(0,b.jsxs)("div",{className:"relative h-48 w-48 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/5 blur-[60px] rounded-full animate-pulse"}),(0,b.jsx)(q,{className:"h-20 w-20 text-muted-foreground opacity-10"})]}),(0,b.jsxs)("div",{className:"space-y-3 max-w-sm",children:[(0,b.jsx)("h3",{className:"text-3xl font-black tracking-tight italic uppercase text-muted-foreground opacity-70 dark:opacity-60",children:"Your Gallery is Empty"}),(0,b.jsx)("p",{className:"text-muted-foreground font-bold text-sm tracking-tight leading-relaxed px-8 opacity-80 dark:opacity-70 uppercase",children:"Curate your collection in the Sonos app to display your favorites here."})]})]})}let v=(0,f.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),w=(0,f.default)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),x=(0,f.default)("disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),y=(0,f.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),z=(0,f.default)("list-music",[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),A=(0,f.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),B=(0,f.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function C(){let{currentGroup:a,refreshState:d,favorites:f,households:g}=(0,c.useSonos)(),[h,i]=(0,n.useState)(!1),[j,k]=(0,n.useState)(null),[l,o]=(0,n.useState)([]),[p,r]=(0,n.useState)([]),s=async b=>{if(!a)return;if(!b||0===Object.keys(b).length)return void console.error("Cannot play empty item");if(b.id&&!j&&!b.itemId)try{if((await fetch(`/api/sonos/control?groupId=${a.id}&favoriteId=${b.id}`,{method:"POST"})).ok)return void await d()}catch(a){console.error("Failed to load favorite:",a)}let c=b.id?.objectId||b.objectId||b.track?.id?.objectId||b.track?.id,e=b.id?.serviceId||b.serviceId||b.track?.id?.serviceId||b.track?.serviceId,f=b.id?.accountId||b.accountId||b.track?.id?.accountId||b.track?.accountId;if(e&&f||!j||(e=e||j.id?.serviceId||j.serviceId,f=f||j.id?.accountId||j.accountId),!c)return void console.error("Missing item ID:",b);if(!e||!f)return void console.error("Missing serviceId or accountId. Item:",b,"Browsing container:",j);try{(await fetch("/api/sonos/library/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:a.id,itemId:c,serviceId:e,accountId:f,action:"replace"})})).ok&&await d()}catch(a){console.error("Failed to play item:",a)}},u=async b=>{if(!a)return;let c=b.id?.objectId||b.objectId,e=b.id?.serviceId||b.serviceId,f=b.id?.accountId||b.accountId,g=b.name||b.title;if(!c||!e||!f||!g)return void console.error("Missing item information:",b);try{(await fetch("/api/sonos/library/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:a.id,itemId:c,serviceId:e,accountId:f,name:g,action:"addToFavorites"})})).ok&&await d()}catch(a){console.error("Failed to add to favorites:",a)}},C=async(b,c=!0)=>{if(!a||!g?.[0])return;if(!b||0===Object.keys(b).length)return void console.error("Cannot browse empty item");let e=b.containerId||b.id?.objectId||b.objectId||b.track?.id?.objectId||b.track?.id,f=b.id?.serviceId||b.serviceId||b.track?.id?.serviceId||b.track?.serviceId,h=b.id?.accountId||b.accountId||b.track?.id?.accountId||b.track?.accountId;if(b.id&&!j&&b.itemId){let a=b.itemId?.objectId||b.itemId,c=b.itemId?.serviceId||b.serviceId,d=b.itemId?.accountId||b.accountId;a&&c&&d&&(e=a,f=c,h=d)}if(!e||!f||!h){console.error("Missing item information for browsing:",b),b.id&&await s(b);return}i(!0),k(b),c&&r([...p,b]);try{if(console.log("Browsing container with:",{itemId:e,serviceId:f,accountId:h,item:b}),b.id&&!j&&(console.log("This is a favorite, trying to load it first..."),(await fetch(`/api/sonos/control?groupId=${a.id}&favoriteId=${b.id}`,{method:"POST"})).ok)){await new Promise(a=>setTimeout(a,1e3));let b=await fetch(`/api/sonos/playback?groupId=${a.id}`);if(b.ok){let a=await b.json();if(console.log("Playback data after loading favorite:",a),a.container?.id){let b=a.container.id.objectId||a.container.id,c=a.container.id.serviceId||a.container.service?.id,e=a.container.id.accountId||h;console.log("Found container from playback:",{containerId:b,containerServiceId:c,containerAccountId:e});let f=await fetch(`/api/sonos/library?accountId=${e}&containerId=${encodeURIComponent(b)}`);if(f.ok){let a=await f.json();console.log("Browse result:",a);let b=[...(a.containers||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||e}})),...(a.items||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||c,accountId:a.accountId||e}}))];o(b),i(!1),await d();return}}}}console.log("Trying metadata endpoint...");let c=await fetch(`/api/sonos/library/metadata?accountId=${h}&itemId=${encodeURIComponent(e)}&serviceId=${f}`);if(c.ok){let a=await c.json();if(console.log("Metadata result:",a),a.containers||a.items){let b=[...(a.containers||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||f,accountId:a.accountId||h}})),...(a.items||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||f,accountId:a.accountId||h}}))];console.log("Setting container items from metadata:",b),o(b),i(!1);return}}else{let a=await c.json().catch(()=>({}));console.error("Metadata request failed:",a)}console.log("Trying browse endpoint...");let g=await fetch(`/api/sonos/library?accountId=${h}&containerId=${encodeURIComponent(e)}`);if(g.ok){let a=await g.json();console.log("Browse result:",a);let b=[...(a.containers||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||f,accountId:a.accountId||h}})),...(a.items||[]).map(a=>({...a,id:a.id||{objectId:a.objectId,serviceId:a.serviceId||f,accountId:a.accountId||h}}))];console.log("Setting container items from browse:",b),o(b)}else{let a=await g.json().catch(()=>({}));console.error("Browse failed:",a),await s(b),k(null),r([])}}catch(a){console.error("Failed to browse container:",a),await s(b),k(null),r([])}finally{i(!1)}},D=f.filter(a=>a&&Object.keys(a).length>0&&(a.name||a.title||a.id)),E=l.filter(a=>a&&Object.keys(a).length>0&&(a.name||a.title||a.id)),F=j?E:D;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-black uppercase italic tracking-tighter mb-2",children:j?j.name:"Your Library"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground uppercase tracking-widest",children:j?"Contents":"Sonos Favorites"})]}),j&&(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>{if(p.length>1){let a=p.slice(0,-1),b=a[a.length-1];r(a),C(b,!1)}else k(null),o([]),r([])},className:"flex items-center gap-2",children:[(0,b.jsx)(B,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-widest",children:"Back"})]})]}),p.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)("button",{onClick:()=>{k(null),o([]),r([])},className:"hover:text-foreground transition-colors",children:"Library"}),p.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t,{className:"h-4 w-4"}),(0,b.jsx)("button",{onClick:()=>{r(p.slice(0,c+1)),c<p.length-1&&C(a,!1)},className:"hover:text-foreground transition-colors truncate max-w-[200px]",children:a.name})]},c))]}),h?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(A,{className:"h-8 w-8 animate-spin text-primary"})}):F.length>0?(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:F.filter(a=>a&&Object.keys(a).length>0&&(a.name||a.title||a.id)).map((a,c)=>((a,c,d)=>{let f;if(!a||0===Object.keys(a).length)return null;let g=(f=a.type||a._objectType||"").includes("album")?x:f.includes("artist")?y:f.includes("playlist")||f.includes("container")?z:w,h=a.imageUrl||a.images?.[0]?.url||a.track?.album?.images?.[0]?.url,i=a.name||a.title||a.track?.name,k=a.type?.includes("container")||"container"===a._objectType||a.type?.includes("playlist")||a.type?.includes("album")||void 0!==a.containerId||a.itemId&&("container"===a.itemId.type||"container"===a.itemId._objectType)||a.id&&a.itemId&&!j||i&&(i.toLowerCase().includes("playlist")||i.toLowerCase().includes("album"))||a.description&&a.description.toLowerCase().includes("track");return(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*c},className:"group relative",children:[(0,b.jsxs)("div",{className:"aspect-square rounded-2xl overflow-hidden bg-foreground/[0.03] border border-foreground/[0.05] hover:border-foreground/20 transition-all cursor-pointer",onClick:b=>{(b.stopPropagation(),a&&0!==Object.keys(a).length)?(console.log("Item clicked:",a,"isContainer:",k),k||!j&&a.id&&a.itemId?(console.log("Attempting to browse container:",a),C(a)):(!j&&a.id?console.log("Playing favorite:",a):console.log("Playing item:",a),s(a))):console.error("Cannot interact with empty item")},children:[h?(0,b.jsx)("img",{src:h,alt:i,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(g,{className:"h-12 w-12 text-muted-foreground"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 dark:bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4",children:k?(0,b.jsx)(e.Button,{variant:"default",size:"icon",className:"h-14 w-14 rounded-full bg-foreground text-background",onClick:b=>{b.stopPropagation(),console.log("Browse button clicked for:",a),C(a)},children:(0,b.jsx)(t,{className:"h-6 w-6"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"default",size:"icon",className:"h-14 w-14 rounded-full bg-foreground text-background",onClick:b=>{b.stopPropagation(),console.log("Play button clicked for:",a),s(a)},children:(0,b.jsx)(q,{className:"h-6 w-6 fill-current ml-0.5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-full bg-white/20 dark:bg-white/10 text-white hover:bg-white/30 dark:hover:bg-white/20",onClick:b=>{b.stopPropagation(),u(a)},children:(0,b.jsx)(v,{className:"h-5 w-5"})})]})})]}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("p",{className:"font-black text-xs uppercase italic truncate",children:i}),(a.artist?.name||a.track?.artists?.[0]?.name)&&(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mt-1 truncate",children:a.artist?.name||a.track?.artists?.map(a=>a.name).join(", ")}),k&&(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mt-1 opacity-60",children:a.type||a._objectType||"Container"})]})]},a.id?.objectId||a.id||c)})(a,c)).filter(Boolean)}):j?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 bg-foreground/[0.02] rounded-3xl border border-foreground/[0.05]",children:[(0,b.jsx)(w,{className:"h-16 w-16 text-muted-foreground opacity-30 dark:opacity-20 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground uppercase tracking-widest mb-2 text-center",children:"No Items Found"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center max-w-md px-4",children:"This container appears to be empty or cannot be browsed."})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 bg-foreground/[0.02] rounded-3xl border border-foreground/[0.05]",children:[(0,b.jsx)(w,{className:"h-16 w-16 text-muted-foreground opacity-30 dark:opacity-20 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground uppercase tracking-widest mb-2 text-center",children:"No Favorites Yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center max-w-md px-4 mb-4",children:"Add favorites in the Sonos app to see them here."}),(0,b.jsxs)("div",{className:"bg-foreground/[0.03] rounded-2xl p-4 border border-foreground/[0.05] max-w-md",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary mb-2",children:"How to Add Favorites"}),(0,b.jsxs)("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside text-left",children:[(0,b.jsx)("li",{children:"Open the Sonos app"}),(0,b.jsx)("li",{children:"Browse and play music"}),(0,b.jsx)("li",{children:"Add items to favorites (heart icon)"}),(0,b.jsx)("li",{children:"Return here to see your favorites"})]})]})]})]})}let D=(0,f.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),E=(0,f.default)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),F=(0,f.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),G=(0,f.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var H=a.i(72857);let I=(0,f.default)("tv",[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]]),J=(0,f.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),K=(0,f.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function L(){let{refreshState:a}=(0,c.useSonos)(),{deviceType:f,deviceConfig:g}=(0,d.useDevice)(),[h,i]=(0,n.useState)(!1),[k,l]=(0,n.useState)(!1),[o,p]=(0,n.useState)(!0),[q,r]=(0,n.useState)(!1),[s,t]=(0,n.useState)(!1);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{p(!0);try{let a=await fetch("/api/sonos/state");i(a.ok)}catch(a){i(!1)}p(!1)},v=async()=>{window.location.href="/api/sonos/login"},w=async()=>{l(!0);try{(await fetch("/api/sonos/disconnect",{method:"POST"})).ok&&(i(!1),await u(),window.location.href="/setup")}catch(a){console.error("Failed to disconnect Sonos:",a)}finally{l(!1)}},x=async()=>{r(!0);try{let a=await fetch("/api/reset-device",{method:"POST"});if(a.ok)window.location.href="/setup";else{let b=await a.json();console.error("Failed to reset device:",b),alert("Failed to reset device. Please try again."),r(!1),t(!1)}}catch(a){console.error("Failed to reset device:",a),alert("Failed to reset device. Please try again."),r(!1),t(!1)}};return o?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)(A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-8 max-w-4xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-black uppercase italic tracking-tighter mb-2",children:"Settings"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground uppercase tracking-widest",children:"Manage your connections"})]}),(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-3xl bg-foreground/[0.02] border border-foreground/[0.05] p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-2xl bg-foreground/[0.05] flex items-center justify-center relative overflow-hidden",children:"theWall"===f?(0,b.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(I,{className:"h-8 w-8 text-foreground"}),(0,b.jsxs)("div",{className:"absolute -top-1 left-0 right-0 flex justify-between px-1",children:[(0,b.jsx)("div",{className:"h-1 w-1 rounded-full bg-foreground/40"}),(0,b.jsx)("div",{className:"h-1 w-1 rounded-full bg-foreground/40"})]})]})}):"theDesk"===f?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,b.jsx)(H.Monitor,{className:"h-6 w-6 text-foreground mb-0.5"}),(0,b.jsxs)("div",{className:"flex items-center gap-0.5 mt-0.5",children:[(0,b.jsx)("div",{className:"h-1 w-3 bg-foreground/30 rounded-sm"}),(0,b.jsx)("div",{className:"h-1 w-2 bg-foreground/40 rounded-sm"}),(0,b.jsx)("div",{className:"h-1 w-3 bg-foreground/30 rounded-sm"})]})]}):(0,b.jsx)(D,{className:"h-6 w-6 text-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase italic tracking-tighter",children:"Device"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest mt-1",children:"Your device configuration"})]})]}),g?(0,b.jsxs)("div",{className:"pt-4 border-t border-foreground/[0.05] space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground uppercase tracking-widest",children:"Device Name"}),(0,b.jsx)("span",{className:"font-black text-foreground",children:g.name})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground uppercase tracking-widest",children:"Screen Size"}),(0,b.jsx)("span",{className:"font-black text-foreground",children:g.screenSize})]})]}):(0,b.jsx)("div",{className:"pt-4 border-t border-foreground/[0.05]",children:(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"No device configured. Please select a device during setup."})})]}),(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-3xl bg-foreground/[0.02] border border-foreground/[0.05] p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-foreground/[0.05] flex items-center justify-center",children:(0,b.jsx)(E,{className:"h-6 w-6 text-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase italic tracking-tighter",children:"Sonos Account"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest mt-1",children:"Control your Sonos speakers"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20",children:[(0,b.jsx)(j.Check,{className:"h-4 w-4 text-primary"}),(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Connected"})]}),(0,b.jsxs)(e.Button,{variant:"ghost",onClick:w,disabled:k,className:"px-6 py-2 rounded-2xl",children:[(0,b.jsx)(F,{className:"h-4 w-4 mr-2"}),"Disconnect"]})]}):(0,b.jsx)(e.Button,{onClick:v,className:"px-6 py-2 rounded-2xl bg-foreground text-background font-black uppercase tracking-widest",children:"Connect Sonos"})})]}),h&&(0,b.jsxs)("div",{className:"pt-4 border-t border-foreground/[0.05]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground uppercase tracking-widest",children:"Status"}),(0,b.jsx)("span",{className:"font-black text-foreground",children:"Active"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm mt-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground uppercase tracking-widest",children:"Last Sync"}),(0,b.jsx)("span",{className:"font-black text-foreground",children:"Just now"})]})]})]}),(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-3xl bg-red-500/5 border border-red-500/20 p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-red-500/10 flex items-center justify-center",children:(0,b.jsx)(J,{className:"h-6 w-6 text-red-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase italic tracking-tighter text-red-500",children:"Reset Device"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest mt-1",children:"Factory reset - removes all configuration"})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-red-500/20",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This will remove your device configuration and Sonos account. You will need to set up the device again from scratch."}),s?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-2xl bg-red-500/10 border border-red-500/20",children:[(0,b.jsx)(K,{className:"h-5 w-5 text-red-500 mt-0.5 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-red-500 mb-1",children:"Are you sure?"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This action cannot be undone. All device settings and Sonos account will be permanently removed."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>t(!1),disabled:q,className:"px-6 py-2 rounded-2xl",children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:x,disabled:q,className:"px-6 py-2 rounded-2xl bg-red-500 text-white hover:bg-red-600 font-black uppercase tracking-widest",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Resetting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{className:"h-4 w-4 mr-2"}),"Confirm Reset"]})})]})]}):(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>t(!0),className:"px-6 py-2 rounded-2xl border border-red-500/30 text-red-500 hover:bg-red-500/10 hover:border-red-500/50 transition-all",children:[(0,b.jsx)(J,{className:"h-4 w-4 mr-2"}),"Reset Device"]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(e.Button,{variant:"ghost",onClick:u,className:"px-6 py-2 rounded-2xl",children:[(0,b.jsx)(G,{className:"h-4 w-4 mr-2"}),"Refresh Status"]})})]})}let M=(0,f.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),N=(0,f.default)("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),O=(0,f.default)("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),P=(0,f.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),Q=(0,f.default)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),R=(0,f.default)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);function S(a,[b,c]){return Math.min(c,Math.max(b,a))}function T(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}var U=a.i(70121);function V(a,c=[]){let d=[],e=()=>{let b=d.map(a=>n.createContext(a));return function(c){let d=c?.[a]||b;return n.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return e.scopeName=a,[function(c,e){let f=n.createContext(e),g=d.length;d=[...d,e];let h=c=>{let{scope:d,children:e,...h}=c,i=d?.[a]?.[g]||f,j=n.useMemo(()=>h,Object.values(h));return(0,b.jsx)(i.Provider,{value:j,children:e})};return h.displayName=c+"Provider",[h,function(b,d){let h=d?.[a]?.[g]||f,i=n.useContext(h);if(i)return i;if(void 0!==e)return e;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return n.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(e,...c)]}var W=globalThis?.document?n.useLayoutEffect:()=>{};n[" useEffectEvent ".trim().toString()],n[" useInsertionEffect ".trim().toString()];var X=n[" useInsertionEffect ".trim().toString()]||W;Symbol("RADIX:SYNC_STATE");var Y=n.createContext(void 0),Z=(a.i(35112),Symbol("radix.slottable"));function $(a){return n.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===Z}var _=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{var d,e;let f,g,h,i=(e=d=`Primitive.${c}`,(f=n.forwardRef((a,b)=>{let{children:c,...d}=a;if(n.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==n.Fragment&&(h.ref=b?(0,U.composeRefs)(b,g):g),n.cloneElement(c,h)}return n.Children.count(c)>1?n.Children.only(null):null})).displayName=`${e}.SlotClone`,g=f,(h=n.forwardRef((a,c)=>{let{children:d,...e}=a,f=n.Children.toArray(d),h=f.find($);if(h){let a=h.props.children,d=f.map(b=>b!==h?b:n.Children.count(a)>1?n.Children.only(null):n.isValidElement(a)?a.props.children:null);return(0,b.jsx)(g,{...e,ref:c,children:n.isValidElement(a)?n.cloneElement(a,void 0,d):null})}return(0,b.jsx)(g,{...e,ref:c,children:d})})).displayName=`${d}.Slot`,h),j=n.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?i:c,{...f,ref:d})});return j.displayName=`Primitive.${c}`,{...a,[c]:j}},{});function aa(a){var c;let d,e=(c=a,(d=n.forwardRef((a,b)=>{let{children:c,...d}=a;if(n.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==n.Fragment&&(h.ref=b?(0,U.composeRefs)(b,g):g),n.cloneElement(c,h)}return n.Children.count(c)>1?n.Children.only(null):null})).displayName=`${c}.SlotClone`,d),f=n.forwardRef((a,c)=>{let{children:d,...f}=a,g=n.Children.toArray(d),h=g.find(ac);if(h){let a=h.props.children,d=g.map(b=>b!==h?b:n.Children.count(a)>1?n.Children.only(null):n.isValidElement(a)?a.props.children:null);return(0,b.jsx)(e,{...f,ref:c,children:n.isValidElement(a)?n.cloneElement(a,void 0,d):null})}return(0,b.jsx)(e,{...f,ref:c,children:d})});return f.displayName=`${a}.Slot`,f}var ab=Symbol("radix.slottable");function ac(a){return n.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===ab}var ad=new WeakMap;function ae(a,b){var c,d;let e,f,g;if("at"in Array.prototype)return Array.prototype.at.call(a,b);let h=(c=a,d=b,e=c.length,(g=(f=af(d))>=0?f:e+f)<0||g>=e?-1:g);return -1===h?void 0:a[h]}function af(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],ad.set(this,!0)}set(a,b){return ad.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=af(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=ae(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=ae(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return ae(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var ag=["PageUp","PageDown"],ah=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ai={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},aj="Slider",[ak,al,am]=function(a){let c=a+"CollectionProvider",[d,e]=V(c),[f,g]=d(c,{collectionRef:{current:null},itemMap:new Map}),h=a=>{let{scope:c,children:d}=a,e=n.default.useRef(null),g=n.default.useRef(new Map).current;return(0,b.jsx)(f,{scope:c,itemMap:g,collectionRef:e,children:d})};h.displayName=c;let i=a+"CollectionSlot",j=aa(i),k=n.default.forwardRef((a,c)=>{let{scope:d,children:e}=a,f=g(i,d),h=(0,U.useComposedRefs)(c,f.collectionRef);return(0,b.jsx)(j,{ref:h,children:e})});k.displayName=i;let l=a+"CollectionItemSlot",m="data-radix-collection-item",o=aa(l),p=n.default.forwardRef((a,c)=>{let{scope:d,children:e,...f}=a,h=n.default.useRef(null),i=(0,U.useComposedRefs)(c,h),j=g(l,d);return n.default.useEffect(()=>(j.itemMap.set(h,{ref:h,...f}),()=>void j.itemMap.delete(h))),(0,b.jsx)(o,{...{[m]:""},ref:i,children:e})});return p.displayName=l,[{Provider:h,Slot:k,ItemSlot:p},function(b){let c=g(a+"CollectionConsumer",b);return n.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${m}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},e]}(aj),[an,ao]=V(aj,[am]),[ap,aq]=an(aj),ar=n.forwardRef((a,c)=>{let{name:d,min:e=0,max:f=100,step:g=1,orientation:h="horizontal",disabled:i=!1,minStepsBetweenThumbs:j=0,defaultValue:k=[e],value:l,onValueChange:m=()=>{},onValueCommit:o=()=>{},inverted:p=!1,form:q,...r}=a,s=n.useRef(new Set),t=n.useRef(0),u="horizontal"===h,[v=[],w]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=n.useState(a),e=n.useRef(c),f=n.useRef(b);return X(()=>{f.current=b},[b]),n.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=n.useRef(void 0!==a);n.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,n.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:l,defaultProp:k,onChange:a=>{let b=[...s.current];b[t.current]?.focus(),m(a)}}),x=n.useRef(v);function y(a,b,{commit:c}={commit:!1}){let d,h=(String(g).split(".")[1]||"").length,i=S(Math.round((Math.round((a-e)/g)*g+e)*(d=Math.pow(10,h)))/d,[e,f]);w((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,i,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,j*g))return a;{t.current=d.indexOf(i);let b=String(d)!==String(a);return b&&c&&o(d),b?d:a}})}return(0,b.jsx)(ap,{scope:a.__scopeSlider,name:d,disabled:i,min:e,max:f,valueIndexToChangeRef:t,thumbs:s.current,values:v,orientation:h,form:q,children:(0,b.jsx)(ak.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(ak.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(u?au:av,{"aria-disabled":i,"data-disabled":i?"":void 0,...r,ref:c,onPointerDown:T(r.onPointerDown,()=>{i||(x.current=v)}),min:e,max:f,inverted:p,onSlideStart:i?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(v,a);y(a,b)},onSlideMove:i?void 0:function(a){y(a,t.current)},onSlideEnd:i?void 0:function(){let a=x.current[t.current];v[t.current]!==a&&o(v)},onHomeKeyDown:()=>!i&&y(e,0,{commit:!0}),onEndKeyDown:()=>!i&&y(f,v.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!i){let c=ag.includes(a.key)||a.shiftKey&&ah.includes(a.key),d=t.current;y(v[d]+g*(c?10:1)*b,d,{commit:!0})}}})})})})});ar.displayName=aj;var[as,at]=an(aj,{startEdge:"left",endEdge:"right",size:"width",direction:1}),au=n.forwardRef((a,c)=>{let d,{min:e,max:f,dir:g,inverted:h,onSlideStart:i,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,[o,p]=n.useState(null),q=(0,U.useComposedRefs)(c,a=>p(a)),r=n.useRef(void 0),s=(d=n.useContext(Y),g||d||"ltr"),t="ltr"===s,u=t&&!h||!t&&h;function v(a){let b=r.current||o.getBoundingClientRect(),c=aG([0,b.width],u?[e,f]:[f,e]);return r.current=b,c(a-b.left)}return(0,b.jsx)(as,{scope:a.__scopeSlider,startEdge:u?"left":"right",endEdge:u?"right":"left",direction:u?1:-1,size:"width",children:(0,b.jsx)(aw,{dir:s,"data-orientation":"horizontal",...m,ref:q,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=v(a.clientX);i?.(b)},onSlideMove:a=>{let b=v(a.clientX);j?.(b)},onSlideEnd:()=>{r.current=void 0,k?.()},onStepKeyDown:a=>{let b=ai[u?"from-left":"from-right"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),av=n.forwardRef((a,c)=>{let{min:d,max:e,inverted:f,onSlideStart:g,onSlideMove:h,onSlideEnd:i,onStepKeyDown:j,...k}=a,l=n.useRef(null),m=(0,U.useComposedRefs)(c,l),o=n.useRef(void 0),p=!f;function q(a){let b=o.current||l.current.getBoundingClientRect(),c=aG([0,b.height],p?[e,d]:[d,e]);return o.current=b,c(a-b.top)}return(0,b.jsx)(as,{scope:a.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:(0,b.jsx)(aw,{"data-orientation":"vertical",...k,ref:m,style:{...k.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=q(a.clientY);g?.(b)},onSlideMove:a=>{let b=q(a.clientY);h?.(b)},onSlideEnd:()=>{o.current=void 0,i?.()},onStepKeyDown:a=>{let b=ai[p?"from-bottom":"from-top"].includes(a.key);j?.({event:a,direction:b?-1:1})}})})}),aw=n.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:h,onEndKeyDown:i,onStepKeyDown:j,...k}=a,l=aq(aj,d);return(0,b.jsx)(_.span,{...k,ref:c,onKeyDown:T(a.onKeyDown,a=>{"Home"===a.key?(h(a),a.preventDefault()):"End"===a.key?(i(a),a.preventDefault()):ag.concat(ah).includes(a.key)&&(j(a),a.preventDefault())}),onPointerDown:T(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():e(a)}),onPointerMove:T(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:T(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),ax="SliderTrack",ay=n.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=aq(ax,d);return(0,b.jsx)(_.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});ay.displayName=ax;var az="SliderRange",aA=n.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=aq(az,d),g=at(az,d),h=n.useRef(null),i=(0,U.useComposedRefs)(c,h),j=f.values.length,k=f.values.map(a=>aF(a,f.min,f.max)),l=j>1?Math.min(...k):0,m=100-Math.max(...k);return(0,b.jsx)(_.span,{"data-orientation":f.orientation,"data-disabled":f.disabled?"":void 0,...e,ref:i,style:{...a.style,[g.startEdge]:l+"%",[g.endEdge]:m+"%"}})});aA.displayName=az;var aB="SliderThumb",aC=n.forwardRef((a,c)=>{let d=al(a.__scopeSlider),[e,f]=n.useState(null),g=(0,U.useComposedRefs)(c,a=>f(a)),h=n.useMemo(()=>e?d().findIndex(a=>a.ref.current===e):-1,[d,e]);return(0,b.jsx)(aD,{...a,ref:g,index:h})}),aD=n.forwardRef((a,c)=>{var d,e,f,g,h;let i,j,{__scopeSlider:k,index:l,name:m,...o}=a,p=aq(aB,k),q=at(aB,k),[r,s]=n.useState(null),t=(0,U.useComposedRefs)(c,a=>s(a)),u=!r||p.form||!!r.closest("form"),v=function(a){let[b,c]=n.useState(void 0);return W(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(r),w=p.values[l],x=void 0===w?0:aF(w,p.min,p.max),y=(d=l,(e=p.values.length)>2?`Value ${d+1} of ${e}`:2===e?["Minimum","Maximum"][d]:void 0),z=v?.[q.size],A=z?(f=z,g=x,h=q.direction,j=aG([0,50],[0,i=f/2]),(i-j(g)*h)*h):0;return n.useEffect(()=>{if(r)return p.thumbs.add(r),()=>{p.thumbs.delete(r)}},[r,p.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[q.startEdge]:`calc(${x}% + ${A}px)`},children:[(0,b.jsx)(ak.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(_.span,{role:"slider","aria-label":a["aria-label"]||y,"aria-valuemin":p.min,"aria-valuenow":w,"aria-valuemax":p.max,"aria-orientation":p.orientation,"data-orientation":p.orientation,"data-disabled":p.disabled?"":void 0,tabIndex:p.disabled?void 0:0,...o,ref:t,style:void 0===w?{display:"none"}:a.style,onFocus:T(a.onFocus,()=>{p.valueIndexToChangeRef.current=l})})}),u&&(0,b.jsx)(aE,{name:m??(p.name?p.name+(p.values.length>1?"[]":""):void 0),form:p.form,value:w},l)]})});aC.displayName=aB;var aE=n.forwardRef(({__scopeSlider:a,value:c,...d},e)=>{let f,g=n.useRef(null),h=(0,U.useComposedRefs)(g,e),i=(f=n.useRef({value:c,previous:c}),n.useMemo(()=>(f.current.value!==c&&(f.current.previous=f.current.value,f.current.value=c),f.current.previous),[c]));return n.useEffect(()=>{let a=g.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(i!==c&&b){let d=new Event("input",{bubbles:!0});b.call(a,c),a.dispatchEvent(d)}},[i,c]),(0,b.jsx)(_.input,{style:{display:"none"},...d,ref:h,defaultValue:c})});function aF(a,b,c){return S(100/(c-b)*(a-b),[0,100])}function aG(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}aE.displayName="RadioBubbleInput";let aH=n.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(ar,{ref:d,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",a),...c,children:[(0,b.jsx)(ay,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,b.jsx)(aA,{className:"absolute h-full bg-primary"})}),(0,b.jsx)(aC,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));aH.displayName=ar.displayName;let aI=(0,f.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);(0,f.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),(0,f.default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var aJ=a.i(62036);function aK({selectedZoneIds:a,onZoneToggle:d,onGroupZones:f,onUngroupZones:g,compact:h=!1}){let{groups:j,currentGroup:k}=(0,c.useSonos)(),[m,o]=(0,n.useState)(!1),[p,q]=(0,n.useState)("");return(0,n.useMemo)(()=>{if(!p.trim())return j;let a=p.toLowerCase();return j.filter(b=>b.name.toLowerCase().includes(a))},[j,p]),a.length>1&&a.length,a.length===j.length&&j.length,(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>o(!m),className:(0,l.cn)("flex items-center gap-2 transition-all text-foreground hover:bg-foreground/10",h?"h-10 px-3 text-xs":"h-12 px-4"),children:[(0,b.jsx)(i.Waves,{className:"h-4 w-4 text-foreground opacity-90"}),(0,b.jsx)("span",{className:"font-black uppercase tracking-tight text-foreground opacity-90",children:0===a.length?"Select Zones":`${a.length} Zone${a.length>1?"s":""}`})]}),!1]})}let aL=(0,f.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),aM=((0,f.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),(0,f.default)("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),(0,f.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]));function aN({selectedZoneIds:a,compact:d=!1}){let{groups:f,refreshState:g,setCurrentGroup:h,setSelectedZoneIds:i,volume:j}=(0,c.useSonos)(),[k,m]=(0,n.useState)(!1),[o,p]=(0,n.useState)({}),[q,r]=(0,n.useState)(!1),[s,t]=(0,n.useState)(null),[u,v]=(0,n.useState)([]);(0,n.useEffect)(()=>{k&&a.length>0&&w()},[k,a,j]);let w=async()=>{r(!0);try{let b=f.filter(b=>a.includes(b.id)),c=[];try{let a=await fetch("/api/sonos/players");a.ok&&(c=(await a.json()).players||[],console.log("Fetched all players:",c))}catch(a){console.error("Failed to fetch all players:",a)}let d=b.map(async a=>{console.log("Processing group for volume:",a);let b=null;try{let c=await fetch(`/api/sonos/volume?groupId=${a.id}`);if(c.ok){let d=await c.json();b="number"==typeof d.volume?d.volume:null,console.log(`Fetched volume for group ${a.id}: ${b}`)}else{let b=await c.text();console.warn(`Failed to fetch volume for ${a.id}: ${c.status} - ${b}`)}}catch(b){console.error(`Failed to fetch group volume for ${a.id}:`,b)}let d=b??j??50,e=(a=>{let b=[],c=new Set;if(console.log("Extracting players from group:",a),a.players&&Array.isArray(a.players)&&(console.log("Found group.players array:",a.players),a.players.forEach(a=>{let d=a.id||a.playerId||a.player?.id||a.playerId,e=a.name||a.playerName||a.displayName||`Player ${d?.slice(-4)||"Unknown"}`;console.log("Processing player:",a,"Extracted ID:",d,"Name:",e),d&&!c.has(d)&&(c.add(d),b.push({playerId:d,name:e,volume:50}))})),a.playerIds&&Array.isArray(a.playerIds)&&(console.log("Found group.playerIds array:",a.playerIds),a.playerIds.forEach(a=>{a&&!c.has(a)&&(c.add(a),b.push({playerId:a,name:`Player ${a.slice(-4)}`,volume:50}))})),a.coordinatorId&&!c.has(a.coordinatorId)&&(console.log("Found coordinatorId:",a.coordinatorId),c.add(a.coordinatorId),b.push({playerId:a.coordinatorId,name:a.name||`Player ${a.coordinatorId.slice(-4)}`,volume:50})),0===b.length&&a.id&&a.id.includes(":")){let c=a.id.split(":")[0];console.log("Extracting coordinator from group ID:",c),b.push({playerId:c,name:a.name||`Player ${c.slice(-4)}`,volume:50})}return console.log("Extracted players:",b),b})(a),g=a.name&&(a.name.includes("+")||a.name.includes("&")),h=a.name?.match(/\+ (\d+)/),i=h?parseInt(h[1])+1:g?2:1;console.log(`Group "${a.name}" - Expected ${i} players, found ${e.length}`);let k=a.coordinatorId||(a.id?.includes(":")?a.id.split(":")[0]:a.id);if(a.playerIds&&Array.isArray(a.playerIds)&&a.playerIds.length>0){console.log("Using group.playerIds as source of truth:",a.playerIds);let b=[];a.playerIds.forEach(a=>{let d=c.find(b=>b.id===a||b.coordinatorId===a);if(!d){let b=a.slice(-4);d=c.find(c=>{let d=c.id||c.coordinatorId||"";return d.includes(b)||a.includes(d.slice(-4))})}if(!d){let b=f.find(b=>(b.coordinatorId||(b.id?.includes(":")?b.id.split(":")[0]:b.id))===a&&!b.name?.includes("+")&&!b.name?.includes("&"));b&&(d={id:a,name:b.name,coordinatorId:a})}let e=d?.name||`Player ${a.slice(-4)}`;console.log(`Player ${a} matched to: ${e}`,d),b.push({playerId:a,name:e,volume:50})}),e.length=0,e.push(...b)}else e.forEach(b=>{let d=c.find(a=>a.id===b.playerId||a.coordinatorId===b.playerId);if(!d){let a=b.playerId.slice(-4);d=c.find(c=>{let d=c.id||c.coordinatorId||"";return d.includes(a)||b.playerId.includes(d.slice(-4))})}if(!d){let a=f.find(a=>(a.coordinatorId||(a.id?.includes(":")?a.id.split(":")[0]:a.id))===b.playerId&&!a.name?.includes("+")&&!a.name?.includes("&"));a&&(d={id:b.playerId,name:a.name,coordinatorId:b.playerId})}d?.name&&(b.name.startsWith("Player ")||b.name===a.name||!b.name)&&(b.name=d.name,console.log(`Updated player ${b.playerId} name to: ${d.name}`))});if(e.length<i&&c.length>0){if(e.length<i&&a.name){let b=a.name.split(/[\+\&]/).map(a=>a.trim());c.forEach(a=>{if(e.length>=i)return;let c=a.name||"";b.some(a=>c.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(c.toLowerCase()))&&!e.find(b=>b.playerId===a.id)&&e.push({playerId:a.id,name:a.name||`Player ${a.id.slice(-4)}`,volume:50})})}1===e.length&&k&&f.forEach(b=>{if(b.id===a.id)return;let d=b.coordinatorId||(b.id?.includes(":")?b.id.split(":")[0]:b.id);if(a.playerIds&&a.playerIds.includes(d)){let a=c.find(a=>a.id===d);a&&!e.find(a=>a.playerId===d)&&e.push({playerId:d,name:b.name||a.name||`Player ${d.slice(-4)}`,volume:50})}})}console.log(`Group ${a.name} (${a.id}) has ${e.length} players:`,e);let l=e.map(async a=>{try{console.log(`Fetching volume for player ${a.playerId} (${a.name})`);let b=await fetch(`/api/sonos/player-volume?playerId=${a.playerId}`);if(b.ok){let c=await b.json(),e="number"==typeof c.volume?c.volume:d;return console.log(`Player ${a.playerId} volume: ${e}`),{...a,volume:e}}{let c=await b.text();return console.error(`Failed to fetch volume for player ${a.playerId}:`,b.status,c),{...a,volume:d}}}catch(b){return console.error(`Error fetching volume for player ${a.playerId}:`,b),{...a,volume:d}}}),m=await Promise.all(l);return{groupId:a.id,groupName:a.name,groupVolume:d,players:m,isPlaying:"PLAYBACK_STATE_PLAYING"===a.playbackState,isExpanded:!1}}),e=await Promise.all(d),g={};e.forEach(a=>{g[a.groupId]=a}),p(g)}catch(a){console.error("Failed to fetch volumes:",a)}finally{r(!1)}},x=f.filter(b=>a.includes(b.id)),y=x.length>0?Math.round(x.reduce((a,b)=>{let c=o[b.id];return a+(c?.groupVolume??j??50)},0)/x.length):j??50;return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>m(!k),className:(0,l.cn)("flex items-center gap-2 transition-all text-foreground hover:bg-foreground/10",d?"h-10 px-3 text-xs":"h-12 px-4"),children:[(0,b.jsx)(aL,{className:"h-4 w-4 text-foreground opacity-90"}),(0,b.jsxs)("span",{className:"font-black uppercase tracking-tight text-foreground opacity-90",children:[y,"%"]})]}),!1]})}function aO(a){let b=Math.floor(a/1e3),c=Math.floor(b/60);return`${c}:${(b%60).toString().padStart(2,"0")}`}function aP({onClose:a}){let{currentGroup:d,playbackState:f,volume:g,setVolume:h,refreshState:i,setIsExpanded:j,groups:k,selectedZoneIds:o,toggleZone:p,setCurrentGroup:r,setSelectedZoneIds:s}=(0,c.useSonos)(),[t,u]=(0,n.useState)(0),[w,x]=(0,n.useState)(!1),[y,A]=(0,n.useState)(!1),B=f?.currentItem?.track,C=f?.container,D=B||C||f?.currentItem,E=f?.playbackState==="PLAYBACK_STATE_PLAYING"||f?.state==="PLAYBACK_STATE_PLAYING"||f?.playbackState==="PLAYING"||f?.state==="PLAYING",F=B?.imageUrl||C?.imageUrl||D?.imageUrl,G=B?.name||C?.name||D?.name||"No Music Playing",H=B?.artist?.name||B?.podcast?.name||C?.name||"Unknown Artist",I=f?.positionMillis||f?.playbackPositionMillis||0,J=f?.durationMillis||D?.durationMillis||f?.currentItem?.track?.durationMillis||0;(0,n.useEffect)(()=>{f?.playModes&&(x(f.playModes.shuffle??!1),A(f.playModes.repeat??!1))},[f?.playModes]),(0,n.useEffect)(()=>{null!=I&&u(I)},[I]),(0,n.useEffect)(()=>{if(!E||0===J)return;let a=setInterval(()=>{u(a=>{let b=a+1e3;return b>=J?J:b})},1e3);return()=>clearInterval(a)},[E,J]);let K=J>0?t/J*100:0,L=async()=>{if(!(o.length<2))try{console.log("Selected zone IDs:",o),console.log("Groups:",k);let a=[];for(let b of o){let c=k.find(a=>a.id===b);if(console.log(`Processing zone ${b}:`,c),c){if(c.players&&Array.isArray(c.players)&&c.players.forEach(b=>{let c=b.id||b.playerId||b.player?.id;console.log("Found player in group.players:",b,`ID: ${c}`),c&&!a.includes(c)&&a.push(c)}),c.playerIds&&Array.isArray(c.playerIds)&&c.playerIds.forEach(b=>{console.log(`Found playerId in group.playerIds: ${b}`),b&&!a.includes(b)&&a.push(b)}),c.id&&c.id.includes(":")){let b=c.id.split(":")[0];console.log(`Extracted player ID from group ID: ${b}`),b&&!a.includes(b)&&a.push(b)}c.coordinatorId&&!a.includes(c.coordinatorId)&&(console.log(`Found coordinatorId: ${c.coordinatorId}`),a.push(c.coordinatorId))}}if(0===a.length)return void console.error("No player IDs found for selected zones");let b=o[0];console.log("Grouping zones:",{targetGroupId:b,playerIds:a});let c=await fetch("/api/sonos/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:b,playerIds:a})});if(!c.ok){let a=await c.json().catch(()=>({error:"Failed to parse error response"}));console.error("Group API error:",{status:c.status,statusText:c.statusText,error:a}),alert(`Failed to group zones: ${a.error||a.details||"Unknown error"}`);return}await i(),await new Promise(a=>setTimeout(a,1e3)),await i();let d=(await fetch("/api/sonos/state").then(a=>a.json()).then(a=>a.groups||[])).find(a=>a.id===b);d&&(r(d),s([b]))}catch(a){console.error("Failed to group zones:",a)}},P=async()=>{try{await i()}catch(a){console.error("Failed to ungroup zones:",a)}},S=async a=>{if(1===o.length||0===o.length){let b=o[0]||d?.id;if(!b)return;(await fetch(`/api/sonos/control?groupId=${b}&command=${a}`,{method:"POST"})).ok&&(await i(),setTimeout(()=>i(),500));return}if(o.length>1){await L();let b=o[0];if(b){let c=await fetch(`/api/sonos/control?groupId=${b}&command=${a}`,{method:"POST"});410===c.status?await i():c.ok&&(await i(),setTimeout(()=>i(),500))}}},T=async()=>{await S(E?"pause":"play")},U=async a=>{await S(a)},V=async a=>{if(!d||0===J)return;let b=Math.floor(J*(a[0]/100));u(b);try{let a=await fetch(`/api/sonos/seek?groupId=${d.id}&positionMillis=${b}`,{method:"POST"});if(410===a.status)await i();else if(a.ok)await i(),setTimeout(()=>{i()},500);else{let b=await a.json().catch(()=>({}));console.error("Seek failed:",b)}}catch(a){console.error("Seek failed:",a)}},W=async()=>{if(!d)return;let a=!w;x(a);try{(await fetch(`/api/sonos/control?groupId=${d.id}&shuffle=${a}`,{method:"POST"})).ok?await i():x(!a)}catch(b){console.error("Failed to toggle shuffle:",b),x(!a)}},X=async()=>{if(!d)return;let a=!y;A(a);try{(await fetch(`/api/sonos/control?groupId=${d.id}&repeat=${a}`,{method:"POST"})).ok?await i():A(!a)}catch(b){console.error("Failed to toggle repeat:",b),A(!a)}};return(0,b.jsxs)(m.motion.div,{initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.6,ease:[.22,1,.36,1]},className:"fixed inset-0 z-[200] bg-background flex flex-col p-6 sm:p-10 md:p-12 overflow-hidden select-none",children:[(0,b.jsx)("div",{className:"absolute inset-0 z-[-1] overflow-hidden pointer-events-none",children:F?(0,b.jsxs)(m.motion.div,{initial:{opacity:0},animate:{opacity:.5},transition:{duration:1.5},className:"relative h-full w-full",children:[(0,b.jsx)("img",{src:F,alt:"Background",className:"w-full h-full object-cover blur-[120px] saturate-[1.5] brightness-[0.3] scale-110"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-background"})]}):(0,b.jsx)("div",{className:"h-full w-full bg-secondary/10"})}),(0,b.jsxs)("header",{className:"w-full max-w-7xl mx-auto flex items-center justify-between z-10 shrink-0 h-20 sm:h-24",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>{j(!1),a()},className:"h-12 w-12 sm:h-14 sm:w-14 rounded-2xl glass hover:bg-white/10 transition-all duration-500 group",children:(0,b.jsx)(aM,{className:"h-8 w-8 group-hover:translate-y-1 transition-transform"})}),(0,b.jsxs)("div",{className:"text-center flex-1 flex flex-col items-center",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-primary mb-1 opacity-70 dark:opacity-60",children:"Atmosphere"}),(0,b.jsx)("h2",{className:"text-lg sm:text-xl font-black italic uppercase tracking-tighter leading-none truncate max-w-[200px] sm:max-w-md",children:o.length>1?`${o.length} Zones`:d?.name||"No Zone Selected"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(aK,{selectedZoneIds:o,onZoneToggle:p,onGroupZones:L,onUngroupZones:P,compact:!1}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-12 w-12 sm:h-14 sm:w-14 rounded-2xl glass hover:bg-white/10 transition-all duration-500",children:(0,b.jsx)(z,{className:"h-6 w-6"})})]})]}),(0,b.jsxs)("main",{className:"w-full max-w-7xl mx-auto flex-1 min-h-0 flex flex-col lg:flex-row items-center justify-center gap-8 md:gap-12 lg:gap-20 z-10 py-4 sm:py-8 overflow-y-auto no-scrollbar",children:[(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center w-full min-h-0 max-h-[40vh] lg:max-h-[60vh]",children:(0,b.jsx)(m.motion.div,{layoutId:"artwork",className:"relative aspect-square h-full max-w-full rounded-[2.5rem] lg:rounded-[4rem] overflow-hidden shadow-[0_40px_100px_-20px_rgba(0,0,0,0.5)] border border-white/5 bg-secondary/20",children:F?(0,b.jsx)("img",{src:F,alt:G,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center italic",children:(0,b.jsx)("span",{className:"text-foreground/5 text-9xl font-black",children:"S"})})})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-center w-full max-w-2xl text-center lg:text-left space-y-8 sm:space-y-12 shrink-0",children:[(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)(m.motion.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},className:"space-y-2 sm:space-y-4",children:[(0,b.jsx)("h1",{className:"text-4xl sm:text-5xl md:text-6xl xl:text-7xl 2xl:text-8xl font-black tracking-tighter italic uppercase leading-[0.9] text-balance",children:G}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-8",children:[(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-foreground/40 tracking-tight uppercase italic truncate",children:H}),(0,b.jsx)("div",{className:"hidden lg:block h-px w-12 bg-primary/20"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,b.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] px-3 py-1 glass rounded-full text-primary border-primary/20",children:"Ultra HD"}),(0,b.jsx)(v,{className:"h-6 w-6 text-muted-foreground opacity-60 dark:opacity-50 hover:text-red-500 transition-colors cursor-pointer"})]})]})]})}),(0,b.jsxs)("div",{className:"space-y-8 sm:space-y-12",children:[(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,b.jsx)(aH,{value:[K],onValueChange:V,max:100,step:.1,className:"w-full h-1.5 sm:h-2 cursor-pointer"}),(0,b.jsxs)("div",{className:"flex justify-between text-[10px] font-black tracking-[0.3em] text-muted-foreground opacity-70 dark:opacity-60 uppercase",children:[(0,b.jsx)("span",{children:aO(t)}),(0,b.jsx)("span",{children:aO(J)})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between lg:justify-start lg:gap-12",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:W,className:(0,l.cn)("h-10 w-10 transition-all",w?"text-primary opacity-100":"text-muted-foreground opacity-70 dark:opacity-60 hover:text-primary"),children:(0,b.jsx)(Q,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex items-center gap-8 sm:gap-12",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-14 w-14 text-foreground/40 hover:text-foreground transition-all hover:scale-110 active:scale-95",onClick:()=>U("skipToPreviousTrack"),children:(0,b.jsx)(N,{className:"h-10 w-10 fill-current"})}),(0,b.jsx)(e.Button,{variant:"default",size:"icon",className:"h-24 w-24 sm:h-32 sm:w-32 rounded-[2.5rem] sm:rounded-[3.5rem] bg-foreground text-background hover:scale-105 active:scale-90 transition-all shadow-2xl border-4 border-white/5 shrink-0",onClick:T,children:E?(0,b.jsx)(M,{className:"h-10 w-10 sm:h-14 sm:w-14 fill-current"}):(0,b.jsx)(q,{className:"h-10 w-10 sm:h-14 sm:w-14 fill-current ml-1.5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-14 w-14 text-foreground/40 hover:text-foreground transition-all hover:scale-110 active:scale-95",onClick:()=>U("skipToNextTrack"),children:(0,b.jsx)(O,{className:"h-10 w-10 fill-current"})})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:X,className:(0,l.cn)("h-10 w-10 transition-all",y?"text-primary opacity-100":"text-muted-foreground opacity-70 dark:opacity-60 hover:text-primary"),children:(0,b.jsx)(R,{className:"h-6 w-6"})})]})]})]})]}),(0,b.jsx)("footer",{className:"w-full max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-6 sm:gap-10 z-10 pt-6 sm:pt-10 border-t border-white/5 shrink-0 h-32 sm:h-24 mb-4 sm:mb-0",children:(0,b.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto px-6 py-3 glass rounded-2xl",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(aN,{selectedZoneIds:o.length>0?o:d?[d.id]:[],compact:!1})})})]})}function aQ(){let{currentGroup:a,playbackState:d,volume:f,setVolume:g,refreshState:h,isExpanded:i,setIsExpanded:j,groups:k,selectedZoneIds:o,toggleZone:p,setCurrentGroup:r,setSelectedZoneIds:s}=(0,c.useSonos)(),[t,u]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{d?.playModes&&(u(d.playModes.shuffle??!1),w(d.playModes.repeat??!1))},[d?.playModes]),!a)return null;let y=d?.currentItem?.track,z=d?.container,A=y||z||d?.currentItem,B=d?.playbackState==="PLAYBACK_STATE_PLAYING"||d?.state==="PLAYBACK_STATE_PLAYING"||d?.playbackState==="PLAYING"||d?.state==="PLAYING",C=y?.imageUrl||z?.imageUrl||A?.imageUrl,D=y?.name||z?.name||A?.name||"No Music Playing",E=y?.artist?.name||y?.podcast?.name||z?.name||"Unknown Artist",F=async a=>{a.stopPropagation(),await J(B?"pause":"play")},G=async(a,b)=>{a.stopPropagation(),await J(b)},H=async()=>{if(!(o.length<2))try{console.log("Selected zone IDs:",o),console.log("Groups:",k);let a=[];for(let b of o){let c=k.find(a=>a.id===b);if(console.log(`Processing zone ${b}:`,c),c){if(c.players&&Array.isArray(c.players)&&c.players.forEach(b=>{let c=b.id||b.playerId||b.player?.id;console.log("Found player in group.players:",b,`ID: ${c}`),c&&!a.includes(c)&&a.push(c)}),c.playerIds&&Array.isArray(c.playerIds)&&c.playerIds.forEach(b=>{console.log(`Found playerId in group.playerIds: ${b}`),b&&!a.includes(b)&&a.push(b)}),c.id&&c.id.includes(":")){let b=c.id.split(":")[0];console.log(`Extracted player ID from group ID: ${b}`),b&&!a.includes(b)&&a.push(b)}c.coordinatorId&&!a.includes(c.coordinatorId)&&(console.log(`Found coordinatorId: ${c.coordinatorId}`),a.push(c.coordinatorId))}}if(0===a.length)return void console.error("No player IDs found for selected zones");let b=o[0];console.log("Grouping zones:",{targetGroupId:b,playerIds:a});let c=await fetch("/api/sonos/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:b,playerIds:a})});if(!c.ok){let a=await c.json().catch(()=>({error:"Failed to parse error response"}));console.error("Group API error:",{status:c.status,statusText:c.statusText,error:a}),alert(`Failed to group zones: ${a.error||a.details||"Unknown error"}`);return}await h(),await new Promise(a=>setTimeout(a,1e3)),await h();let d=(await fetch("/api/sonos/state").then(a=>a.json()).then(a=>a.groups||[])).find(a=>a.id===b);d&&(r(d),s([b]))}catch(a){console.error("Failed to group zones:",a)}},I=async()=>{try{await h()}catch(a){console.error("Failed to ungroup zones:",a)}},J=async b=>{if(1===o.length||0===o.length){let c=o[0]||a?.id;if(!c)return;let d=await fetch(`/api/sonos/control?groupId=${c}&command=${b}`,{method:"POST"});410===d.status?await h():d.ok&&(await h(),setTimeout(()=>h(),500));return}if(o.length>1){await H();let a=o[0];a&&(await fetch(`/api/sonos/control?groupId=${a}&command=${b}`,{method:"POST"})).ok&&(await h(),setTimeout(()=>h(),500))}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.motion.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:1,ease:[.22,1,.36,1]},onClick:()=>j(!0),className:"h-28 glass-light rounded-[3rem] p-4 shadow-[0_40px_80px_-20px_rgba(0,0,0,0.4)] flex items-center justify-between gap-8 border border-white/10 group cursor-pointer hover:bg-white/10 dark:hover:bg-black/40 transition-all duration-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 w-[35%] min-w-0",children:[(0,b.jsxs)("div",{className:"h-20 w-20 rounded-[2rem] overflow-hidden flex-shrink-0 shadow-2xl relative group-hover:scale-105 transition-transform duration-700 border border-white/5 bg-secondary",children:[C?(0,b.jsx)("img",{src:C,alt:D,className:"w-full h-full object-cover saturate-125"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(x,{className:"h-8 w-8 text-muted-foreground opacity-20 animate-spin-slow"})}),B&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex gap-1.5 items-end h-6",children:[(0,b.jsx)(m.motion.div,{animate:{height:[4,16,8,20,4]},transition:{repeat:1/0,duration:1},className:"w-1 bg-white rounded-full"}),(0,b.jsx)(m.motion.div,{animate:{height:[8,4,16,4,12]},transition:{repeat:1/0,duration:.8},className:"w-1 bg-white rounded-full"}),(0,b.jsx)(m.motion.div,{animate:{height:[12,16,4,16,8]},transition:{repeat:1/0,duration:1.2},className:"w-1 bg-white rounded-full"})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,b.jsx)("span",{className:"font-black text-[22px] tracking-tighter truncate uppercase italic leading-none mb-1.5",children:D}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary opacity-90 dark:opacity-80",children:"Artist"}),(0,b.jsx)("span",{className:"text-[13px] font-bold text-muted-foreground truncate uppercase tracking-widest opacity-70 dark:opacity-60",children:E})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-10",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-14 w-14 text-muted-foreground hover:text-foreground transition-all group/btn",onClick:a=>G(a,"skipToPreviousTrack"),children:(0,b.jsx)(N,{className:"h-8 w-8 fill-current transition-transform group-active/btn:scale-90"})}),(0,b.jsx)(e.Button,{variant:"default",size:"icon",className:"h-20 w-20 rounded-[2rem] bg-foreground text-background hover:scale-105 active:scale-90 transition-all shadow-[0_20px_40px_-8px_rgba(0,0,0,0.3)] dark:shadow-primary/20 border-4 border-white/5",onClick:F,children:B?(0,b.jsx)(M,{className:"h-10 w-10 fill-current"}):(0,b.jsx)(q,{className:"h-10 w-10 fill-current ml-1.5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-14 w-14 text-muted-foreground hover:text-foreground transition-all group/btn",onClick:a=>G(a,"skipToNextTrack"),children:(0,b.jsx)(O,{className:"h-8 w-8 fill-current transition-transform group-active/btn:scale-90"})})]}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-8 w-[35%]",children:(0,b.jsxs)("div",{className:"hidden xl:flex items-center gap-3 pr-4",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(aN,{selectedZoneIds:o.length>0?o:a?[a.id]:[],compact:!0}),(0,b.jsx)(aK,{selectedZoneIds:o,onZoneToggle:p,onGroupZones:H,onUngroupZones:I,compact:!0}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:async b=>{if(b.stopPropagation(),!a)return;let c=!t;u(c);try{(await fetch(`/api/sonos/control?groupId=${a.id}&shuffle=${c}`,{method:"POST"})).ok?await h():u(!c)}catch(a){console.error("Failed to toggle shuffle:",a),u(!c)}},className:(0,l.cn)("h-14 w-14 rounded-[1.75rem] glass transition-all",t?"bg-primary/20 text-primary":"hover:bg-primary/10 text-muted-foreground"),children:(0,b.jsx)(Q,{className:"h-6 w-6"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:async b=>{if(b.stopPropagation(),!a)return;let c=!v;w(c);try{(await fetch(`/api/sonos/control?groupId=${a.id}&repeat=${c}`,{method:"POST"})).ok?await h():w(!c)}catch(a){console.error("Failed to toggle repeat:",a),w(!c)}},className:(0,l.cn)("h-14 w-14 rounded-[1.75rem] glass transition-all",v?"bg-primary/20 text-primary":"hover:bg-primary/10 text-muted-foreground"),children:(0,b.jsx)(R,{className:"h-6 w-6"})}),(0,b.jsx)(e.Button,{variant:"secondary",size:"icon",className:"h-14 w-14 rounded-[1.75rem] bg-primary text-primary-foreground hover:scale-105 transition-all shadow-lg",onClick:a=>{a.stopPropagation(),j(!0)},children:(0,b.jsx)(P,{className:"h-6 w-6"})})]})})]}),(0,b.jsx)(aJ.AnimatePresence,{children:i&&(0,b.jsx)(aP,{onClose:()=>j(!1)})})]})}(0,f.default)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),(0,f.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);let aR=(0,f.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),aS=(0,f.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),aT=(0,f.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),aU=(0,f.default)("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);function aV(){let{currentGroup:a,isExpanded:e,currentPage:f,setCurrentPage:g}=(0,c.useSonos)(),{deviceType:h}=(0,d.useDevice)(),[i,j]=(0,n.useState)(!0),[k,o]=(0,n.useState)(!0),q=null!==h;return(0,n.useEffect)(()=>{let a=localStorage.getItem("theme");if(null!==a){let b="dark"===a;j(b),b?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}else j(!0),document.documentElement.classList.add("dark")},[]),(0,n.useEffect)(()=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[i]),(0,b.jsxs)("div",{className:(0,l.cn)("flex h-screen bg-background text-foreground transition-colors duration-1000 overflow-hidden font-sans",q&&"device-responsive"),children:[(0,b.jsxs)("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-[-10%] left-[-5%] w-[50%] h-[50%] bg-primary/5 blur-[150px] rounded-full"}),(0,b.jsx)("div",{className:"absolute bottom-[-10%] right-[-5%] w-[40%] h-[40%] bg-foreground/3 blur-[120px] rounded-full"})]}),(0,b.jsx)(aJ.AnimatePresence,{children:k&&!e&&(0,b.jsxs)(m.motion.aside,{initial:{x:-320,opacity:0},animate:{x:0,opacity:1},exit:{x:-320,opacity:0},transition:{type:"spring",damping:35,stiffness:250},className:"fixed lg:relative z-50 h-full w-[300px] flex flex-col border-r border-foreground/[0.03]",children:[(0,b.jsx)("div",{className:"p-10 pb-6 shrink-0",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 group cursor-pointer",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-foreground flex items-center justify-center transition-all duration-500 group-hover:scale-110 shadow-lg",children:(0,b.jsx)(aU,{className:"text-background h-5 w-5"})}),(0,b.jsx)("span",{className:"text-lg font-black tracking-[0.2em] uppercase italic opacity-90 leading-none",children:"Stream"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar py-6",children:(0,b.jsx)(p,{isCollapsed:!1})}),(0,b.jsxs)("div",{className:"p-10 shrink-0 space-y-6",children:[(0,b.jsxs)("button",{onClick:()=>j(!i),className:"w-full h-12 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-between px-6 transition-all duration-300 group",children:[(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-muted-foreground group-hover:text-foreground transition-colors",children:i?"Night":"Day"}),(0,b.jsxs)("div",{className:"relative h-4 w-4",children:[(0,b.jsx)(aS,{className:(0,l.cn)("absolute inset-0 h-4 w-4 transition-all duration-700",i?"scale-0 rotate-90":"scale-100 rotate-0 text-amber-500")}),(0,b.jsx)(aR,{className:(0,l.cn)("absolute inset-0 h-4 w-4 transition-all duration-700",i?"scale-100 rotate-0 text-foreground":"scale-0 -rotate-90")})]})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("p",{className:"text-[8px] font-black uppercase tracking-[0.5em] text-muted-foreground opacity-60 dark:opacity-40 italic",children:"V 1.0 Architectural"})})]})]})}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col h-full relative z-10 overflow-hidden",children:[!e&&(0,b.jsxs)("header",{className:"h-32 px-12 lg:px-20 flex items-center justify-between shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-10",children:[(0,b.jsxs)("button",{onClick:()=>o(!k),className:"h-10 w-10 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-center transition-all group relative overflow-hidden",children:[(0,b.jsx)(aT,{className:(0,l.cn)("h-4 w-4 transition-transform duration-500",k?"translate-y-10 scale-0":"translate-y-0 scale-100")}),(0,b.jsx)(aI,{className:(0,l.cn)("absolute h-4 w-4 transition-transform duration-500",k?"translate-y-0 scale-100":"-translate-y-10 scale-0")})]}),(0,b.jsx)(aJ.AnimatePresence,{mode:"wait",children:(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-0.5",children:[(0,b.jsx)("p",{className:"text-[9px] font-black uppercase tracking-[0.6em] text-primary opacity-70 dark:opacity-60",children:"Environment"}),(0,b.jsx)("h2",{className:"text-4xl lg:text-5xl font-black tracking-tighter italic uppercase leading-none text-foreground",children:a?.name||"Lobby"})]},a?.id||"empty")})]}),(0,b.jsx)("div",{className:"hidden md:flex items-center gap-8",children:(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsx)("button",{onClick:()=>g("Settings"),className:(0,l.cn)("h-10 w-10 rounded-full border border-foreground/[0.05] hover:bg-foreground/[0.03] flex items-center justify-center transition-all","Settings"===f?"text-foreground bg-foreground/[0.05]":"text-muted-foreground hover:text-foreground"),children:(0,b.jsx)(D,{className:"h-4 w-4"})})})})]}),(0,b.jsx)("section",{className:(0,l.cn)("flex-1 overflow-y-auto no-scrollbar pt-4 pb-48",e?"px-0":q?"px-8":"px-12 lg:px-20"),children:!e&&(0,b.jsxs)(b.Fragment,{children:["Feed"===f&&(0,b.jsx)(u,{}),"Library"===f&&(0,b.jsx)(C,{}),"Settings"===f&&(0,b.jsx)(L,{}),"Broadcast"===f&&(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("p",{className:"text-muted-foreground uppercase tracking-widest",children:"Broadcast Coming Soon"})}),"Curated"===f&&(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("p",{className:"text-muted-foreground uppercase tracking-widest",children:"Curated Coming Soon"})})]})}),"Settings"!==f&&(0,b.jsx)("div",{className:(0,l.cn)("absolute bottom-12 left-0 right-0 pointer-events-none",q?"px-8":"px-12 lg:px-20"),children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto pointer-events-auto",children:(0,b.jsx)(aQ,{})})})]})]})}a.s(["Dashboard",()=>aV],75195)},57997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={UnrecognizedActionError:function(){return f},unstable_isUnrecognizedActionError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor(...a){super(...a),this.name="UnrecognizedActionError"}}function g(a){return!!(a&&"object"==typeof a&&a instanceof f)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},75718,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},15128,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},11026,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(15128),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},22099,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(15128),g=a.r(11026),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},8535,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28102,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(8535),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},64177,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(8535).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},88213,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(8535).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},35710,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},31101,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},77747,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(8535),e=a.r(11026);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},3326,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},99392,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},83590,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},76383,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},88644,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},54110,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return B},PreludeState:function(){return $},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return z},accessedDynamicData:function(){return J},annotateDynamicAccess:function(){return O},consumeDynamicAccess:function(){return K},createDynamicTrackingState:function(){return s},createDynamicValidationState:function(){return t},createHangingInputAbortSignal:function(){return N},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return ac},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return u},getStaticShellDisallowedDynamicReasons:function(){return ab},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return I},logDisallowedDynamicError:function(){return _},markCurrentScopeAsDynamic:function(){return v},postponeWithTracking:function(){return C},throwIfDisallowedDynamic:function(){return aa},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return X},trackDynamicHoleInStaticShell:function(){return Y},useDynamicRouteParams:function(){return P},useDynamicSearchParams:function(){return Q}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(72131))&&d.__esModule?d:{default:d},i=a.r(3326),j=a.r(99392),k=a.r(32319),l=a.r(56704),m=a.r(35710),n=a.r(83590),o=a.r(76383),p=a.r(41997),q=a.r(88644),r="function"==typeof h.default.unstable_postpone;function s(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function t(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function u(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function v(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return C(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function w(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function x(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function y(a,b,c){let d=H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function z(a,b,c,d){let e=d.dynamicTracking;y(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function A(a,b,c,d){if(!1===d.controller.signal.aborted){y(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function B({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();C(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function C(a,b,c){(function(){if(!r)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(D(a,b))}function D(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&F(a.message)}function F(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===F(D("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let G="NEXT_PRERENDER_INTERRUPTED";function H(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=G,b}function I(a){return"object"==typeof a&&null!==a&&a.digest===G&&"name"in a&&"message"in a&&a instanceof Error}function J(a){return a.length>0}function K(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function L(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function M(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function N(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function O(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function P(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return C(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Q(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let R=/\n\s+at Suspense \(<anonymous>\)/,S=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),T=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),U=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.hasDynamicMetadata=!0;return}if(U.test(b)){c.hasDynamicViewport=!0;return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function X(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Y(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Z(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}var $=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function _(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function aa(a,b,c,d){if(d.syncDynamicErrorWithStack)throw _(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)_(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function ab(a,b,c){if(c.hasSuspenseAboveBody)return[];if(0!==b){let d=c.dynamicErrors;if(d.length>0)return d;if(1===b)return[Object.defineProperty(new q.InvariantError(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===c.hasAllowedDynamic&&0===c.dynamicErrors.length&&c.dynamicMetadata)return[c.dynamicMetadata];return[]}function ac(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},44753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(35710),e=a.r(31101),f=a.r(41997),g=a.r(77747),h=a.r(54110),i=a.r(3326);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},47083,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(44753).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21066,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(75718),g=a.r(22099),h=a.r(11026),i=a.r(28102),j=a.r(64177),k=a.r(88213),l=a.r(47083);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},74137,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return h.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return j.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_isUnrecognizedActionError:function(){return k.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return r},usePathname:function(){return p},useRouter:function(){return q},useSearchParams:function(){return o},useSelectedLayoutSegment:function(){return t},useSelectedLayoutSegments:function(){return s},useServerInsertedHTML:function(){return j.useServerInsertedHTML}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(9270),h=a.r(36313),i=a.r(39118),j=a.r(18341),k=a.r(57997),l=a.r(21066),m=a.r(54110).useDynamicRouteParams,n=a.r(54110).useDynamicSearchParams;function o(){n?.("useSearchParams()");let a=(0,f.useContext)(h.SearchParamsContext);return(0,f.useMemo)(()=>a?new h.ReadonlyURLSearchParams(a):null,[a])}function p(){return m?.("usePathname()"),(0,f.useContext)(h.PathnameContext)}function q(){let a=(0,f.useContext)(g.AppRouterContext);if(null===a)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return a}function r(){return m?.("useParams()"),(0,f.useContext)(h.PathParamsContext)}function s(a="children"){m?.("useSelectedLayoutSegments()");let b=(0,f.useContext)(g.LayoutRouterContext);return b?(0,i.getSelectedLayoutSegmentPath)(b.parentTree,a):null}function t(a="children"){m?.("useSelectedLayoutSegment()"),(0,f.useContext)(h.NavigationPromisesContext);let b=s(a);return(0,i.computeSelectedLayoutSegment)(b,a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},50944,(a,b,c)=>{b.exports=a.r(74137)},32004,a=>{"use strict";var b=a.i(72131),c=a.i(50944),d=a.i(61128);function e(){let a=(0,c.useSearchParams)(),e=(0,c.useRouter)(),{setCurrentPage:f}=(0,d.useSonos)();return(0,b.useEffect)(()=>{let b=a.get("spotify_connected"),c=a.get("error");"true"===b?(f("Settings"),e.replace("/")):c&&(f("Settings"),e.replace("/"))},[a,e,f]),null}a.s(["SpotifyCallbackHandler",()=>e])}];

//# sourceMappingURL=_6acc7e21._.js.map